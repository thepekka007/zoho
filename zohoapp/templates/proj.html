{% extends 'base.html' %}
{% block content %}
{% load static %}

<!-- <link rel="stylesheet" href="{% static 'assets/css/search.css' %}"> -->

<!-- class="row fixed-top " -->
<!-- style=" position: fixed;" -->

<style>
  /* Style the Select2 search input */
  .select2-search__field {
    width: 100%; /* Set the width as needed */
    padding: 8px; /* Adjust padding as needed */
    border: 1px solid #ced4da; /* Add border color */
    border-radius: 4px; /* Add border-radius for rounded corners */
    outline: none; /* Remove the outline */
    color: #000;
  }
/*   
  .select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:35px;user-select:none;color: black;
    -webkit-user-select:none;background-color: #fff;} */
.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:20px;padding-right:20px; height: 25px;color: rgb(0, 0, 0);background-color: #fff;border-radius: 2px;box-shadow: #f1f1f1;}
    .select2-dropdown{background-color:white;color: black;position:absolute;left:-100000px;width:100%;z-index:1051;color: black}
    .select2-results{display:block}
    .select2-results__options{list-style:none;margin:0;padding:0;color: black;background-color: #fff;} 
    .select2-results__option[aria-selected]{cursor:pointer;color: black;background-color: #fff;}
    .select2-container--open .select2-dropdown{left:0;color: rgb(240, 231, 231);background-color: #fff;}

    .select2-hidden-accessible{background-color: #fff;border:0 !important;clip:rect(0 0 0 0) !important;-webkit-clip-path:inset(50%) !important;clip-path:inset(50%) !important;height:0px !important;padding:0 !important;position:absolute !important;width:1px !important;white-space:nowrap !important;color: black} 
    .select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #000000;border-radius:4px;color: rgb(0, 0, 0);background-color: #fff;}
/* .select2-hidden-accessible{background-color: #fff;border:0 !important;clip:rect(0 0 0 0) !important;-webkit-clip-path:inset(50%) !important;clip-path:inset(50%) !important;height:1px !important;overflow:hidden !important;padding:0 !important;position:absolute !important;width:1px !important;white-space:nowrap !important;color: black}  */
.select2-container--default .select2-selection--single:focus, .select2-container--default .select2-selection--single .select2-search__field:focus, .typeahead:focus, .tt-query:focus, .tt-hint:focus {
    border: 1px solid rgba(255, 255, 255, 0.5);
    background-color: #f1f1f1;
}
</style>

<style>
    .modal{
      z-index: 9999;
      overflow: scroll;
        }

  /* Modal styles */
  .modal1 {
    display: none;
    /* Hide the modal by default */
    position: fixed;
    /* Stay in place */
    z-index: 1;
    /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    /* Full width */
    height: 100%;
    /* Full height */
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/ opacity */
  }

  .modal2 {
    display: none;
    /* Hide the modal by default */
    position: fixed;
    /* Stay in place */
    z-index: 9999;
    /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    /* Full width */
    height: 100%;
    /* Full height */
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/ opacity */
  }

  .modal1-content {
    background-color: #fefefe;
    margin: 5vh auto;
    /* 15% from the top and centered */
    padding: 0.1rem;
    border: 1px solid #888;
    width: 80%;
    /* Set the width of the modal */
  }

  /* .modal-content {
        padding: 1.5rem;
        width: 50vw;
        height: auto !important;
        margin: auto;
    } */

  .modal2-content {
    background-color: #fefefe;
    margin: 15% auto;
    /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 300px;
    /* Set the width of the modal */
  }

  .modal3 {
    display: none;
    /* Hide the modal by default */
    position: fixed;
    /* Stay in place */
    z-index: 2;
    /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    /* Full width */
    height: 100%;
    /* Full height */
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/ opacity */
  }

  .modal3-content {
    background-color: #fefefe;
    margin: 15% auto;
    /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 300px;
    /* Set the width of the modal */
  }

  .modal1-label {
    font-weight: bold;
  }

  .modal1-input {
    width: 100%;
    padding: 12px 20px;
    margin: 8px 0;
    box-sizing: border-box;
  }

  .modal1-buttons {
    text-align: right;
    margin-top: 20px;
  }

  .modal {
    z-index: 1050;
    overflow: x;

  }

  select option {
    color: #000;
  }
  .input-group-text , .table .input-group-text {
        /* background-color: white; Change background color to white */
        color: rgb(255, 255, 255); /* Change text color to black or your desired text color */
    }

    .input-group-prepend {
        border: 1px solid white; /* Change border color to white */
    }
    select:focus {
        outline: none !important;
        box-shadow: none !important;
    }

    #customer_sel option:hover {
        background-color: rgb(210, 132, 30);
    }

    .element-below-fixed {
        padding-top: 100px;
    }

    /* width */
    ::-webkit-scrollbar {
        width: 10px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #888;
    }

    /* Handle on hover */
    ::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    .hide {
        display: none;
    }

    .modal-backdrop {
        background-color: rgba(0, 0, 0, 0.8);
        z-index: 999;
        /* Adjust the alpha value to control the opacity */
    }
</style>
<!-- <section > -->
<div class="container-fulid p-3">


  <h3 class="mb-3  text-white " style="font-size: 2rem;">New Project</h3><br>
 
  <form method="post" id="project-form" action="{% url 'addproj' %}" enctype="multipart/form-data" class="">
    {% csrf_token %}


    <div class=" form-group row">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Project name*</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="text" class="form-control bg-light text-dark" name="name" required>
        <div class="invalid-feedback">Please fill out this field.</div>

      </div>

    </div>

    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Project Code</label></div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="number" class="form-control bg-light text-dark" name="pcode" required>
        <div class="invalid-feedback">Please fill out this field.</div>

      </div>


    </div>
    <!-- <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Customer Name*</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6 d-flex align-items-center">
      Add the "d-flex" and "align-items-center" classes -->
        <!-- <select name="c_name" id="customer" class="form-control bg-light text-dark">
          <option value="">Select Customer</option>
          {% for d in data %}
          <option value="{{d.id}}" data-email="{{ d.customerEmail }}">{{d.customerName}}</option>
          {% endfor %}
        </select>
        <a href="" class="p-2" data-toggle="modal" data-target="#create_customer">
          <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
              data-toggle="tooltip" title="Create Vendor"></i>
      </a>
      </div>
    </div>  -->
    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Customer Name*</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6 d-flex align-items-center">
        <!-- Add the "d-flex" and "align-items-center" classes -->
        <select name="c_name" id="selected" class="form-control bg-light text-dark select" style="color: #000;background-color: #909091;" placeholder="Select Customer">
         
          {% for d in data %}
          <option value="{{d.id}}" data-email="{{ d.customerEmail }}">{{d.customerName}}</option>
          {% endfor %}
        </select>
        <a href="" class="p-2" data-toggle="modal" data-target="#create_customer">
          <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
              data-toggle="tooltip" title="Create Vendor"></i>
      </a>
      </div>
    </div>
 <!-- <script>
      $(document).on('change', '#selected', function () {
        var customer = $('#selected').val();
        $.ajax({
          type: "GET",
          url: "{% url 'customerdata' %}",
          data: {
            id: customer
          },
          success: function (response) {
            // console.log(response.email)
            dataemail = response.email;
            datagst =response.gst;
            datagstin =response.gstin;
            address2 = response.billingAddress;
            console.
            document.getElementById('customer-address').value = address2;
            document.getElementById('customer-email').value = dataemail;
            document.getElementById('customer-gst').value = datagst;
       
            if(datagst !='Unregistered Business-not Registered under GST' ){
              document.getElementById('gstin').style.display='flex';
              document.getElementById('customer-gstin').value = datagstin;
            }
            else{
              document.getElementById('gstin').style.display='none';
            }

          }
        });
      });
    </script>
    <script>
      $(document).ready(function() {
       
          $('#selected').select2();
      });
  </script> -->
  <script>
    $(document).ready(function() {
      // Initialize select2
      $('#selected').select2();
  
      // Handle change event for the 'selected' element
      $(document).on('change', '#selected', function () {
        var customer = $('#selected').val();
        $.ajax({
          type: "GET",
          url: "{% url 'customerdata' %}",
          data: {
            id: customer
          },
          success: function (response) {
            // console.log(response.email)
            dataemail = response.email;
            datagst =response.gst;
            datagstin =response.gstin;
            address2 = response.billingAddress;
            if(address2 != 'null' && address2.trim() != '')
            {
              document.getElementById('customer-address').value = address2;
            }
            // document.getElementById('customer-address').value = address2;
            document.getElementById('customer-email').value = dataemail;
            document.getElementById('customer-gst').value = datagst;
  
            if(datagst !='Unregistered Business-not Registered under GST' ){
              document.getElementById('gstin').style.display='flex';
              document.getElementById('customer-gstin').value = datagstin;
            }
            else{
              document.getElementById('gstin').style.display='none';
            }
          }
        });
      });
    });
  </script>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" defer ></script>
  
  
  


    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Email</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="text" id="customer-email" class="form-control bg-light text-dark">
      </div>
    </div>  
 
    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Billing Address </label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <textarea  class="form-control text-dark bg-light" style="height: 10rem;" id="customer-address" name="address"></textarea>
      </div>
    </div>  


    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Billing Method*</label></div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <select name="billing" id="billingMethodSelect" class="form-control bg-light text-dark">
          <!-- <option value=""></option> -->
          <option value="Fixed cost for project">Fixed cost for project</option>
          <option value="Based on project hours">Based on project hours</option>
          <!-- <option value="Based on staff hours">Based on staff hours</option>
          <option value="Based on task hours">Based on task hours</option> -->
        </select>
      </div>
    </div>
    <div id="inputBoxContainer" style="display: none;">
      <div class="form-group row">
        <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
          <label id="rateLabel">Rate per hour*</label>
        </div>
        <div class="col-sm-12 col-md-6 col-lg-6">
          <div class="input-group">
            <div class="input-group-prepend">
              <div class="input-group-text" style="color: white;">INR</div>
            </div>
            <input type="text" class="form-control bg-light text-dark" name="rateperhour" id="inputBox">
          </div>
        </div>
      </div>
    </div>


    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Start Date</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="date" id="startdate" name="start" class="form-control bg-light text-dark">
      </div>
    </div>
    
    <div class="form-group row mt-4">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>End Date</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="date" id="enddate" name="end" class="form-control bg-light text-dark">
      </div>
    </div>
    <div class=" form-group row">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Description</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="text" class="form-control bg-light text-dark" name="name" required>
        <div class="invalid-feedback">Please fill out this field.</div>

      </div>

    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Get the current date in the format YYYY-MM-DD
        var today = new Date().toISOString().split('T')[0];
    
        // Set the initial values of Start Date and End Date to today
        $('#startdate').val(today);
        $('#enddate').val(today);
    
        // Update the min and max attributes based on user input
        $('#startdate').on('change', function () {
          fromDate = $(this).val();
          $('#enddate').prop('min', function () {
            return fromDate;
          });
        });
    
        $('#enddate').on('change', function () {
          toDate = $(this).val();
          $('#startdate').prop('max', function () {
            return toDate;
          });
        });
      });
    </script>
    



    <label for="">Users</label><br>
 

    <div class="row mt-2">
      <div class="col-md-12 table-responsive-md mt-3">
        <table class="table  " id="item_table" onclick='toggleDateInput()' >
          <thead>
        
          </thead>
          <tbody>
            <tr id="row1">
                <td style="width: 10%;">
                Select Employee
                </td>
                
                
                <td style="width: 40%;" class='text-right text-dark'> <select name="user_select[]" id="empid" class="form-control bg-light text-dark">
                  <option value=" ">Select Employee</option>
                  {% for d in emp %}
                  <option value="{{ d.id }}" data-email="{{ d.first_name }}">{{ d.first_name }} {{ d.last_name }}</option>
                  {% endfor %}  
                </select>
                        
                </td>
                <td style="width: 40%;" class='text-right text-dark'>   <input type="email" id="mo" placeholder="Enter the email id" name="user_email[]" class="form-control bg-light text-dark">
     
                </td>
                <script>
                  $(document).ready(function(){
                  $('#empid').change(function(){
                    var name = $("#empid").val();
                    console.log("helooooooooooooooooooo")
                    console.log(name)
                    $.ajax({
                      url: "{% url 'exp_get_employeedet' %}", 
                            data: { 
                                    id : name,
                                    csrfmiddlewaretoken: '{{ csrf_token }}' 
                                },
                
                            type : 'POST',
                            success: function(data) {
                              
                                    var email = data.email;
                   
                                   
                        
                                    console.log("helloooooooooooooooooooooooooooooooo");
                                    console.log(email);
                
                                  
                                    if(email != 'null' && email.trim() !== '' )
                                    {
                                      $("#mo").val(email);
                
                                    
                                     
                                    }
                                    
                                 
                            }
                    });
                  });
                });
                 
                
                  </script>
                <td class='text-center'><button type='button' id='del_btn1'
                        class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row'
                        style='width:30px'>X</button></td>
                        <td class='text-center'>
                          <!-- <button type='button' class='btn btn-transparent text-warning btn-sm btn-outline-warning rounded-circle clone-row' data-row=1 style='width:30px'><i class="fa fa-clone"></i>
                          </button> -->
                        </td>
                        <td>
                          <a href="" class="p-2" data-toggle="modal"  id="create-user">
                            <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
                                data-toggle="tooltip" title="Create Vendor"></i>
                        </a>
                        </td>
</tr>
    </tbody>
  </table>
  <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="add-row">Add another line</button>
</div >
</div>
    <!-- <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="add-row">Add another line</button> -->
    <script>
      var rowCount = 1;
      $(document).ready(function () {
        // Counter for row IDs
      
        // Function to calculate the row amount
        function calculateRowAmount(row) {
          var qty = parseFloat(row.find('.qty').val());
          var rate = parseFloat(row.find('.rate').val());
          var tax = parseFloat(row.find('.tax').val());
          var discount = parseFloat(row.find('.discount').val());
      
          var rowAmount = (qty * rate) - discount;
          var taxAmount = (rowAmount * tax) / 100;
      
          row.find('.amount').val(rowAmount.toFixed(2));
          row.find('.taxamount').val(taxAmount.toFixed(2));
          
          return rowAmount;
          calculateTaxAmount();
        }
      
        // Function to calculate the subtotal
        function calculateSubtotal() {
          var subtotal = 0;
          $('#item_table tbody tr').each(function () {
            subtotal += calculateRowAmount($(this));
          });
          $('#subtotal').val(subtotal.toFixed(2));
        }
      
      // Function to calculate the grand total
      function calculateGrandTotal() {
        var grandTotal = 0;
        var totalTaxAmount = 0;
      
        $('#item_table tbody tr').each(function () {
          var rowAmount = calculateRowAmount($(this));
          grandTotal += rowAmount;
          var taxAmount = parseFloat($(this).find('.taxamount').val());
          grandTotal += taxAmount;
          totalTaxAmount += taxAmount;
        });
        var shippingCharges = parseFloat($('#shipping').val());
        var adjust = parseFloat($('#adjustment').val());
      
        grandTotal += shippingCharges ;
        if (adjust >= 0) {
                    grandtotal += adjust;
                } else {
                    grandtotal -= Math.abs(adjust);
                }
      
        $('#grandtotal').val(grandTotal.toFixed(2));
        $('#total_taxamount').val(totalTaxAmount.toFixed(2));
      }
      
        $('#item_table').on('change', '.tax', function () {
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
        });
      
        $('#add-row').click(function () {
          rowCount++; // Increment row counter
          var newRow = `
    <tr id="row1">
                <td style="width: 10%;">
                Select Employee
                </td>
                
                
                <td style="width: 40%;" class='text-right text-dark'> <select name="user_select[]" class="form-control bg-light text-dark">
                  <option value=" ">Select Employee</option>
                  {% for d in emp %}
                  <option value="{{ d.id }}" data-email="{{ d.first_name }}">{{ d.first_name }} {{ d.last_name }}</option>
                  {% endfor %}
                </select>
                        
                </td>
                <td style="width: 40%;" class='text-right text-dark'>   <input type="email" placeholder="Enter the email id" name="user_email[]" class="form-control bg-light text-dark">
     
                </td>
                <td class='text-center'><button type='button' id='del_btn1'
                        class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row'
                        style='width:30px'>X</button></td>
                        <td class='text-center'>
                       
                        </td>
</tr>

          `;
        $('#item_table tbody').append(newRow);
          toggleDateInput();
          calculateSubtotal();
          calculateGrandTotal();
        });
        $('#item_table').on('click', '.delete-row', function () {
          $(this).closest('tr').remove();
          calculateSubtotal();
          calculateGrandTotal();
          calculateTaxAmount();
        });
        $('#srcofsupply').on('change', function () {
        var row = $(this).closest('tr');
        calculateRowAmount(row);
        calculateSubtotal();
        calculateGrandTotal();
        toggleDateInput();
        calculateTaxAmount();
      
        // Calculate total tax amount and its IGST amount
        var totalTaxAmount = 0;
        var totalIGSTAmount = 0;
      
        $('#item_table tbody tr').each(function () {
          var tax = $(this).find('.tax').val();
          var amount = $(this).find('.amount').val();
      
          var taxAmount = amount * (tax / 100);
          totalTaxAmount += taxAmount;
      
          if (tax.startsWith('IGST')) {
            totalIGSTAmount += taxAmount;
          }
        });
      
        // Update the total tax amount and its IGST amount in the UI
        $('#total_taxamount').val(totalTaxAmount.toFixed(2));
        $('#total_igstamount').val(totalIGSTAmount.toFixed(2));
      });
      
        $(document).ready(function() {
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
      });
        // Input change event for quantity, rate, and discount
        $('#item_table').on('input', '.qty, .rate, .discount,.tax', function () {
          var row = $(this).closest('tr');
          calculateRowAmount(row);
          calculateSubtotal();
          calculateGrandTotal();
          toggleDateInput();
          calculateTaxAmount();
        });
      
        $('#shipping').on('input', function () {
          var shippingAmount = parseFloat($(this).val());5
          $('#shipping_charge').val(shippingAmount.toFixed(2));
          calculateGrandTotal();
        });
      
         $('#adjustment').on('change', function () {
          calculateGrandTotal();
        });
      
      
      
        // Add an event listener to the fields in the item table
      $('#item_table').on('click', '.item_select, .acnt, .rate, .qty, .tax, .discount', function () {
        var row = $(this).closest('tr');
        var taxElement = row.find('.tax');
      
        var checkbox = document.getElementById("srcofsupply");
        var vale = checkbox.value;
      
        if (vale === "[KL] Kerala") {
          taxElement.find('optgroup[label="GST"]').show();
          taxElement.find('optgroup[label="IGST"]').hide();
        } else {
          taxElement.find('optgroup[label="GST"]').hide();
          taxElement.find('optgroup[label="IGST"]').show();
        }
      });
      
      // Event handler for clone button
      $('#item_table').on('click', '.clone-row', function () {
        var row = $(this).closest('tr');
        var clonedRow = row.clone(); // Clone the current row
        var newRowId = 'row' + rowCount; // Generate a new ID for the cloned row
        clonedRow.attr('id', newRowId); // Set the new ID for the cloned row
      
        // Clone the options for tax, account, and item
        var currentItem = row.find('.item_select').val();
        clonedRow.find('.item_select').val(currentItem);
        // var currentAccount = row.find('.acnt').val();
        // clonedRow.find('.acnt').val(currentAccount);
        var currentTax = row.find('.tax').val();
        clonedRow.find('.tax').val(currentTax);
      
        rowCount++; // Increment row counter
      
        $('#item_table tbody').append(clonedRow);
        var row = $(this).closest('tr');
        calculateRowAmount(row);
        calculateSubtotal();
        calculateGrandTotal();
        toggleDateInput();
        calculateTaxAmount();
        toggleDateInput();
      });
      
      
             
      
      });
      function calculateTaxAmount() {
              var checkbox = document.getElementById("srcofsupply");
              var vale=checkbox.value;
              var srcofsupply = vale; // Replace with the actual value of srcofsupply
              var companyState = "[KL] Kerala"; // Replace with the actual value of company state
      
              var subtotal = parseFloat(document.getElementById("subtotal").value);
              var shipping = parseFloat(document.getElementById("shipping").value);
              var adjust = parseFloat(document.getElementById("adjustment").value);
              var tax = parseFloat(document.getElementById("total_taxamount").value);
              
              var tax_rate = 0.0; // Default tax rate for IGST
              if (srcofsupply === companyState) {
                  tax_rate =tax; // Tax rate for CGST/SGST
              }
      
              var total_taxamount = tax_rate;
      
              var cgst = 0.00;
              var sgst = 0.00;
              var igst = 0.00;
      
              if (srcofsupply === companyState) {
                  cgst = total_taxamount / 2;
                  sgst = total_taxamount / 2;
              } else {
                  igst = tax;
              }
      
              document.getElementById("cgst").value = cgst.toFixed(2);
              document.getElementById("sgst").value = sgst.toFixed(2);
              document.getElementById("igst").value = igst.toFixed(2);
      
              if (srcofsupply === companyState) {
                  document.getElementById("tr_igst").style.display = "none";
                  document.getElementById("tr_cgst").style.display = "";
                  document.getElementById("tr_sgst").style.display = "";
              } else {
                  document.getElementById("tr_igst").style.display = "";
                  document.getElementById("tr_cgst").style.display = "none";
                  document.getElementById("tr_sgst").style.display = "none";
              }
      
              document.getElementById("total_taxamount").value = total_taxamount.toFixed(2);
              var grandtotal = subtotal + total_taxamount + shipping ;
              // grandtotal += adjust;
      
                if (adjust >= 0) {
                    grandtotal += adjust;
                } else {
                    grandtotal -= Math.abs(adjust);
                }
              document.getElementById("grandtotal").value = grandtotal.toFixed(2);
          }
      
          // Call the function initially on page load
          
      
          // Add event listeners to update tax amounts when subtotal or shipping changes
          document.getElementById("subtotal").addEventListener("input", calculateTaxAmount);
          document.getElementById("shipping").addEventListener("input", calculateTaxAmount);
          document.getElementById("adjustment").addEventListener("input", calculateTaxAmount);
      
      function toggleDateInput() {
            var checkbox = document.getElementById("srcofsupply");
            var vale=checkbox.value;
            
            for (var i = 1; i <= rowCount; i++) {
              var taxElement = $('#tax' + i);
      
              if (vale === "[KL] Kerala") {
                  taxElement.find('optgroup[label="GST"]').show();
                  taxElement.find('optgroup[label="IGST"]').hide();
              } else {
                  taxElement.find('optgroup[label="GST"]').hide();
                  taxElement.find('optgroup[label="IGST"]').show();
              }
          }
        }
      
        function test(taxamount) {
              console.log('test333');
              console.log(taxamount)
              d = 0;
              var checkbox = document.getElementById("srcofsupply");
              var vale=checkbox.value;
              console.log(pos)
              console.log('state')
              console.log(state)
              console.log('state')
              console.log('----------')
              if ( vale === "[KL] Kerala") {
                  console.log(pos);
                  console.log(state);
                  console.log(taxamount);
                  gst = taxamount / 2;
                  console.log(gst);
                  $('#cgst').val(parseFloat(gst.toFixed(2)));
                  $('#sgst').val(parseFloat(gst.toFixed(2)));
                  $('#igst').val(parseFloat(d.toFixed(2)));
                  
                  // document.getElementById('tr_cgst').style= ('display: flex');
                  
                  // document.getElementById('tr_sgst').style= ('display: flex');
                  // document.getElementById('tr_igst').style= ('display: none');
      
                 
              }
              else{
                  gst = taxamount ;
                  console.log(gst);
                  $('#cgst').val(parseFloat(d.toFixed(2)));
                  $('#sgst').val(parseFloat(d.toFixed(2)));
                  $('#igst').val(parseFloat(gst.toFixed(2)));
              }
              var checkbox = document.getElementById("srcofsupply");
              var vale=checkbox.value;
              var pos= "[KL] Kerala"
              if (vale==pos){
      
              }
      
              if (vale !=  "[KL] Kerala") {
                  console.log(pos);
                  console.log(state);
                  document.getElementById('tr_cgst').style=('display: none');
                  document.getElementById('tr_sgst').style= ('display: none');
                  document.getElementById('tr_igst').style= ('display: block');
              }
              else{
                  document.getElementById('tr_cgst').style=('display: block');
                  document.getElementById('tr_sgst').style= ('display: block');
                  document.getElementById('tr_igst').style= ('display: none');
              }
          }
      
      </script>
   <script>
      // Add serial numbers to each row
      $(document).ready(function () {
        updateSerialNumbers();
    
        // Function to update serial numbers
        function updateSerialNumbers() {
          $('#tab_logic tbody tr').each(function (index) {
            $(this).find('.serial-number').text(index + 1);
          });
        }
    
        // Add a new row
        $('#add_row').on('click', function () {
          // Add a new row to the table
          var newRow = $('#addr0').clone();
          newRow.find('select, input').val('');
          newRow.attr('id', 'addr' + ($('#tab_logic tbody tr').length));
    
          // Append the new row to the table body
          $('#items-table-body').append(newRow);
    
          // Update serial numbers after adding a new row
          updateSerialNumbers();
        });
    
        // Delete a row
        $(document).on('click', '.delete-row', function () {
          // Remove the row
          $(this).closest('tr').remove();
    
          // Update serial numbers after deleting a row
          updateSerialNumbers();
        });
      });
    </script>
    
    <!-- <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
          id="add-user-row">Add User</button> -->
    <!-- <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
      id="create-user">Create User</button><br><br><br> -->
      <br><br><br>
    <label for="">Tasks</label><br>

    <!-- <table class="table text-black my-2" id="task_table">
      <thead>
        <tr>
          <th>Task name</th>
          <th class="text-right">Description</th>
          <th class="text-right">Rate per hour</th>
          <th class="text-center"></th>
          <th class="text-right hidden">Date</th>
          <th class="text-center">Actions</th>

        </tr>
      </thead>
      <tbody id="items-table-task">
        <tr id="addt0">
          <td>
            <input type="text" class="form-control bg-light text-dark" id="task1" name="taskname[]">
          </td>
          <td class="text-right">
            <input type="text" class="form-control bg-light text-dark" id="desc1" name="taskdes[]">
          </td>
      
         
          <td id="hidden" style="display: none;"><input class="form-control text-dark" type="date" name="billdate[]">
          </td>
          <td><button type="button"
              class="btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row"
              style="width:30px">
              <i class="fa fa-times"></i>
            </button></td>
        </tr>
      </tbody>
    </table> -->
    <table class="table  " id="item_table2" onclick='toggleDateInput()' >
   
      <tbody>
        <tr id="row1">
        
            <td style="width: 10%;">
              Task name
            </td>
            
            
            <td style="width: 50%;" class='text-right text-dark'> <input type="text" placeholder="Enter the Task" name="taskname[]"class="form-control bg-light text-dark">
 
          
                    
            </td>
            <td style="width: 50%;" class='text-right text-dark'>   <input type="text" placeholder="Task Discription"  name="taskdes[]" class="form-control bg-light text-dark">
 
            </td>

            <td class='text-center'><button type='button' id='del_btn1'
                    class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row'
                    style='width:30px'>X</button></td>
                    <td class='text-center'>
                      <!-- <button type='button' class='btn btn-transparent text-warning btn-sm btn-outline-warning rounded-circle clone-row' data-row=1 style='width:30px'><i class="fa fa-clone"></i>
                      </button> -->
                    </td>
                    <td></td>
                    <td><td></td>
               
</tr>
</tbody>
</table>
<br>


<button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="add-row2">Add another line</button>

    
<script>
  var rowCount = 1;
  $(document).ready(function () {
    // Counter for row IDs
  
    // Function to calculate the row amount
    function calculateRowAmount(row) {
      var qty = parseFloat(row.find('.qty').val());
      var rate = parseFloat(row.find('.rate').val());
      var tax = parseFloat(row.find('.tax').val());
      var discount = parseFloat(row.find('.discount').val());
  
      var rowAmount = (qty * rate) - discount;
      var taxAmount = (rowAmount * tax) / 100;
  
      row.find('.amount').val(rowAmount.toFixed(2));
      row.find('.taxamount').val(taxAmount.toFixed(2));
      
      return rowAmount;
      calculateTaxAmount();
    }
  
    // Function to calculate the subtotal
    function calculateSubtotal() {
      var subtotal = 0;
      $('#item_table2 tbody tr').each(function () {
        subtotal += calculateRowAmount($(this));
      });
      $('#subtotal').val(subtotal.toFixed(2));
    }
  
  // Function to calculate the grand total
  function calculateGrandTotal() {
    var grandTotal = 0;
    var totalTaxAmount = 0;
  
    $('#item_table2 tbody tr').each(function () {
      var rowAmount = calculateRowAmount($(this));
      grandTotal += rowAmount;
      var taxAmount = parseFloat($(this).find('.taxamount').val());
      grandTotal += taxAmount;
      totalTaxAmount += taxAmount;
    });
    var shippingCharges = parseFloat($('#shipping').val());
    var adjust = parseFloat($('#adjustment').val());
  
    grandTotal += shippingCharges ;
    if (adjust >= 0) {
                grandtotal += adjust;
            } else {
                grandtotal -= Math.abs(adjust);
            }
  
    $('#grandtotal').val(grandTotal.toFixed(2));
    $('#total_taxamount').val(totalTaxAmount.toFixed(2));
  }
  
    $('#item_table2').on('change', '.tax', function () {
      var row = $(this).closest('tr');
      calculateRowAmount(row);
      calculateSubtotal();
      calculateGrandTotal();
    });
  
    $('#add-row2').click(function () {
      rowCount++; // Increment row counter
      var newRow = `
      <tr id="row1">
        
        <td style="width: 15%;">
          Task name
        </td>
        
        
        <td style="width: 40%;" class='text-right text-dark'> <input type="email" placeholder="Enter the email id" name="taskname[]"class="form-control bg-light text-dark">

      
                
        </td>
        <td style="width: 40%;" class='text-right text-dark'>   <input type="email" placeholder="Task Discription"  name="taskdes[]" class="form-control bg-light text-dark">

        </td>

        <td class='text-center'><button type='button' id='del_btn1'
                class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row'
                style='width:30px'>X</button></td>
                <td class='text-center'>
                  <!-- <button type='button' class='btn btn-transparent text-warning btn-sm btn-outline-warning rounded-circle clone-row' data-row=1 style='width:30px'><i class="fa fa-clone"></i>
                  </button> -->
                </td>
                <td></td>
                <td><td></td>
           
</tr>

      `;
    $('#item_table2 tbody').append(newRow);
      toggleDateInput();
      calculateSubtotal();
      calculateGrandTotal();
    });
    $('#item_table2').on('click', '.delete-row', function () {
      $(this).closest('tr').remove();
      calculateSubtotal();
      calculateGrandTotal();
      calculateTaxAmount();
    });
    $('#srcofsupply').on('change', function () {
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
    toggleDateInput();
    calculateTaxAmount();
  
    // Calculate total tax amount and its IGST amount
    var totalTaxAmount = 0;
    var totalIGSTAmount = 0;
  
    $('#item_table2 tbody tr').each(function () {
      var tax = $(this).find('.tax').val();
      var amount = $(this).find('.amount').val();
  
      var taxAmount = amount * (tax / 100);
      totalTaxAmount += taxAmount;
  
      if (tax.startsWith('IGST')) {
        totalIGSTAmount += taxAmount;
      }
    });
  
    // Update the total tax amount and its IGST amount in the UI
    $('#total_taxamount').val(totalTaxAmount.toFixed(2));
    $('#total_igstamount').val(totalIGSTAmount.toFixed(2));
  });
  
    $(document).ready(function() {
      var row = $(this).closest('tr');
      calculateRowAmount(row);
      calculateSubtotal();
      calculateGrandTotal();
      toggleDateInput();
      calculateTaxAmount();
  });
    // Input change event for quantity, rate, and discount
    $('#item_table2').on('input', '.qty, .rate, .discount,.tax', function () {
      var row = $(this).closest('tr');
      calculateRowAmount(row);
      calculateSubtotal();
      calculateGrandTotal();
      toggleDateInput();
      calculateTaxAmount();
    });
  
    $('#shipping').on('input', function () {
      var shippingAmount = parseFloat($(this).val());5
      $('#shipping_charge').val(shippingAmount.toFixed(2));
      calculateGrandTotal();
    });
  
     $('#adjustment').on('change', function () {
      calculateGrandTotal();
    });
  
  
  
    // Add an event listener to the fields in the item table
  $('#item_table2').on('click', '.item_select, .acnt, .rate, .qty, .tax, .discount', function () {
    var row = $(this).closest('tr');
    var taxElement = row.find('.tax');
  
    var checkbox = document.getElementById("srcofsupply");
    var vale = checkbox.value;
  
    if (vale === "[KL] Kerala") {
      taxElement.find('optgroup[label="GST"]').show();
      taxElement.find('optgroup[label="IGST"]').hide();
    } else {
      taxElement.find('optgroup[label="GST"]').hide();
      taxElement.find('optgroup[label="IGST"]').show();
    }
  });
  
  // Event handler for clone button
  $('#item_table2').on('click', '.clone-row', function () {
    var row = $(this).closest('tr');
    var clonedRow = row.clone(); // Clone the current row
    var newRowId = 'row' + rowCount; // Generate a new ID for the cloned row
    clonedRow.attr('id', newRowId); // Set the new ID for the cloned row
  
    // Clone the options for tax, account, and item
    var currentItem = row.find('.item_select').val();
    clonedRow.find('.item_select').val(currentItem);
    // var currentAccount = row.find('.acnt').val();
    // clonedRow.find('.acnt').val(currentAccount);
    var currentTax = row.find('.tax').val();
    clonedRow.find('.tax').val(currentTax);
  
    rowCount++; // Increment row counter
  
    $('#item_table2 tbody').append(clonedRow);
    var row = $(this).closest('tr');
    calculateRowAmount(row);
    calculateSubtotal();
    calculateGrandTotal();
    toggleDateInput();
    calculateTaxAmount();
    toggleDateInput();
  });
  
  
         
  
  });
  function calculateTaxAmount() {
          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var srcofsupply = vale; // Replace with the actual value of srcofsupply
          var companyState = "[KL] Kerala"; // Replace with the actual value of company state
  
          var subtotal = parseFloat(document.getElementById("subtotal").value);
          var shipping = parseFloat(document.getElementById("shipping").value);
          var adjust = parseFloat(document.getElementById("adjustment").value);
          var tax = parseFloat(document.getElementById("total_taxamount").value);
          
          var tax_rate = 0.0; // Default tax rate for IGST
          if (srcofsupply === companyState) {
              tax_rate =tax; // Tax rate for CGST/SGST
          }
  
          var total_taxamount = tax_rate;
  
          var cgst = 0.00;
          var sgst = 0.00;
          var igst = 0.00;
  
          if (srcofsupply === companyState) {
              cgst = total_taxamount / 2;
              sgst = total_taxamount / 2;
          } else {
              igst = tax;
          }
  
          document.getElementById("cgst").value = cgst.toFixed(2);
          document.getElementById("sgst").value = sgst.toFixed(2);
          document.getElementById("igst").value = igst.toFixed(2);
  
          if (srcofsupply === companyState) {
              document.getElementById("tr_igst").style.display = "none";
              document.getElementById("tr_cgst").style.display = "";
              document.getElementById("tr_sgst").style.display = "";
          } else {
              document.getElementById("tr_igst").style.display = "";
              document.getElementById("tr_cgst").style.display = "none";
              document.getElementById("tr_sgst").style.display = "none";
          }
  
          document.getElementById("total_taxamount").value = total_taxamount.toFixed(2);
          var grandtotal = subtotal + total_taxamount + shipping ;
          // grandtotal += adjust;
  
            if (adjust >= 0) {
                grandtotal += adjust;
            } else {
                grandtotal -= Math.abs(adjust);
            }
          document.getElementById("grandtotal").value = grandtotal.toFixed(2);
      }
  
      // Call the function initially on page load
      
  
      // Add event listeners to update tax amounts when subtotal or shipping changes
      document.getElementById("subtotal").addEventListener("input", calculateTaxAmount);
      document.getElementById("shipping").addEventListener("input", calculateTaxAmount);
      document.getElementById("adjustment").addEventListener("input", calculateTaxAmount);
  
  function toggleDateInput() {
        var checkbox = document.getElementById("srcofsupply");
        var vale=checkbox.value;
        
        for (var i = 1; i <= rowCount; i++) {
          var taxElement = $('#tax' + i);
  
          if (vale === "[KL] Kerala") {
              taxElement.find('optgroup[label="GST"]').show();
              taxElement.find('optgroup[label="IGST"]').hide();
          } else {
              taxElement.find('optgroup[label="GST"]').hide();
              taxElement.find('optgroup[label="IGST"]').show();
          }
      }
    }
  
    function test(taxamount) {
          console.log('test333');
          console.log(taxamount)
          d = 0;
          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          console.log(pos)
          console.log('state')
          console.log(state)
          console.log('state')
          console.log('----------')
          if ( vale === "[KL] Kerala") {
              console.log(pos);
              console.log(state);
              console.log(taxamount);
              gst = taxamount / 2;
              console.log(gst);
              $('#cgst').val(parseFloat(gst.toFixed(2)));
              $('#sgst').val(parseFloat(gst.toFixed(2)));
              $('#igst').val(parseFloat(d.toFixed(2)));
              
              // document.getElementById('tr_cgst').style= ('display: flex');
              
              // document.getElementById('tr_sgst').style= ('display: flex');
              // document.getElementById('tr_igst').style= ('display: none');
  
             
          }
          else{
              gst = taxamount ;
              console.log(gst);
              $('#cgst').val(parseFloat(d.toFixed(2)));
              $('#sgst').val(parseFloat(d.toFixed(2)));
              $('#igst').val(parseFloat(gst.toFixed(2)));
          }
          var checkbox = document.getElementById("srcofsupply");
          var vale=checkbox.value;
          var pos= "[KL] Kerala"
          if (vale==pos){
  
          }
  
          if (vale !=  "[KL] Kerala") {
              console.log(pos);
              console.log(state);
              document.getElementById('tr_cgst').style=('display: none');
              document.getElementById('tr_sgst').style= ('display: none');
              document.getElementById('tr_igst').style= ('display: block');
          }
          else{
              document.getElementById('tr_cgst').style=('display: block');
              document.getElementById('tr_sgst').style= ('display: block');
              document.getElementById('tr_igst').style= ('display: none');
          }
      }
  
  </script>
    <table class="table text-black my-2" id="task_table">
      <div class="form-group row mt-4">
        <!-- <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color: white;">Customer Type</label> -->
<td>
        <div class=" col-sm-12 col-md-3 col-lg-3">
          <input type="radio" value="Billable" name="type">
          <label for="Business"> Billable</label>
          &nbsp;&nbsp;&nbsp;
        </td>
        <td>
          <input type="radio" value="Non Billable" name="type">
          <label for="Business">Non Billable</label>
        </div><br>
      </div>
        </td>
        
      <td id="hidden" style="display: none;"><input class="form-control text-dark" type="date" name="billdate[]">
      </td>
          <td class="text-center">
         
          </td>
          <td id="hidden" style="display: none;"><input class="form-control text-dark" type="date" name="billdate[]">
          </td>
         
    </table><br>
    <!-- <div class=" form-group row">
      <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
        <label>Description</label>
      </div>
      <div class="col-sm-12 col-md-6 col-lg-6">
        <input type="text" class="form-control bg-light text-dark" name="name" required>
        <div class="invalid-feedback">Please fill out this field.</div>

      </div>

    </div> -->
    <!-- <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
          id="add-task-row">Add Task</button><br><br> -->
    <script>
      $(document).ready(function () {
        $("#billable1").change(function () {
          if (this.checked) {
            $("#hidden").css("display", "block");
          } else {
            $("#hidden").css("display", "none");
          }
        });
      });
    </script>
    <!--<div class="col-sm-12 col-md-6 col-lg-6">
        <input  type="checkbox"  name="w_phone" placeholder="work phone" required>
           
        <label class="col-sm-12 col-md-6 col-lg-6 ">Add to the watchlist on my dashboard.</label>
        </div>-->
    <button type="submit" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
      id="save-btn">Save</button>
    <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
      id="cancel-btn">Cancel</button>
  </form>


  <!-- The modal -->
  <form onsubmit="event.preventDefault(); addUnit();" class="form-container" id="unitForm">
    {% csrf_token %}
    <div id="myModal" class="modal1">
      <div class="modal2-content bg-dark">
        <h1>Create User</h1>
        <label for="username" class="modal1-label">Username:</label>
        <input type="text" id="username" class="modal1-input" name="usernamezz" placeholder="Enter your username">
        <br>
        <label for="email" class="modal1-label">Email:</label><br>
        <input type="email" id="email" class="modal1-input" name="emailzz" placeholder="Enter your email">

        <div class="modal1-buttons">
          <button type="submit" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
            id="create-btn">Create</button>
          <button type="button" onclick="document.getElementById('myModal').style.display='none'"
            class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="cancel-btn">Cancel</button>
        </div>
      </div>
    </div>
  </form>

  <!--modal-->

  <div id="myModa" class="modal2 container-fluid">
    <div class="modal1-content  bg-dark">
      <div class="d-flex justify-content-end">
        <button type="button" class="close btn  text-grey "
          onclick="document.getElementById('myModa').style.display='none'" style="background-color: rgb(210, 30, 30);">
          <span aria-hidden="true">X</span>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <div class="modal fade" id="newpayment">
            <div class="modal-dialog modal-xl">
              <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                <div class="modal-header " style="background: rgb(32, 35, 37);">
                    <h3 class="m-3 text-uppercase">Add Payment Term</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="background: rgb(32, 35, 37);">
                  <div class="card p-3 m-3">
                    <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment">
                      <div class="row mt-2">
                        <div class="col-md-2 mt-2"></div>
                        <div class="col-md-4 mt-2">
                          <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
                        </div>
        
                        <div class="col-md-4 mt-2">
                          <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
                        </div>
                        <div class="col-md-2 mt-2"></div>
                      </div>
        
        
                      <div class="row mt-2">
                        <div class="col-md-2 mt-2"></div>
        
                        <div class="col-md-4 mt-2">
                          <input type="text " class="form-control text-dark bg-light" id="tname" name="term_name" required>      
                        </div>
        
                        <div class="col-md-4 mt-2">
                          <input type="number" class="form-control text-dark bg-light" id="tdays" name="term_days" required>
                        </div>
                        <div class="col-md-2 mt-2"></div>
        
                      </div>
                      
                      <div class="row mt-5">
                        <div class="col-md-4"></div>
                        <div class="col-md-4">
                          <div class="d-flex">
                            <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                            type="submit" data-dismiss="modal" id="paySave">Save
                            </button> 
                            
        
                            <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                              data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">Cancel</span>
                            </button>
                          </div>
                        </div>
                        <div class="col-md-4"></div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </div>  
          </div> 
          
 <script>
    $(document).on("click","#paySave",function(){
    console.log($("#tname").val())
    console.log($("#tdays").val())

  $.ajax({
    type : 'POST',
    url:"{% url 'payment_terms_cust' %}",

    data:{
        name : $("#tname").val(),
        days : $("#tdays").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        console.log('welcome')
        term_name=response.terms
        document.getElementById("crt_term").innerHTML=term_name
        document.getElementById("modalPayment").reset();
        // reloadPayment();
      },
  });        
});


          </script>
        
          <h3 class="mb-3  text-white " style="font-size: 2rem;">New Customer</h3><br>

          <form method="POST" action="{% url 'entr_custmrA' %}" enctype="multipart/form-data" class="" novalidate
            id="forms">
            {% csrf_token %}

            <div class="form-group row mt-4">
              <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color: white;">Customer Type</label>

              <div class=" col-sm-12 col-md-3 col-lg-3">
                <input type="radio" value="Business" name="type">
                <label for="Business"> Business</label>
                &nbsp;&nbsp;&nbsp;
                <input type="radio" value="Individual" name="type">
                <label for="Business">Individual</label>
              </div><br>
            </div>
            <div class=" form-group row">
              <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                <label>Primary Contact</label>
              </div>
              <div class="col-sm-12 col-md-1 col-lg-1">
                <select id="sa" name="txtsalu" class="form-control bg-light text-dark  ">


                  <option value="Mr" selected>Mr</option>
                  <option value="Mrs">Mrs</option>
                  <option value="Ms">Ms</option>
                  <option value="Dr">Dr</option>




                </select>
              </div>
              <div class="col-sm-12 col-md-2 col-lg-3">
                <input type="text" class="form-control bg-light text-dark  " id="fName" name="fName"
                  placeholder="first name" required>

              </div>
              <div class="col-sm-12 col-md-2 col-lg-2">
                <input type="text" class="form-control bg-light text-dark " id="lName" name="lName"
                  placeholder="last name" oninput="generateFullName()" required>

              </div>
            </div>
            <div class="form-group row mt-4">
              <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Display Name*</label></div>
              <div class="col-sm-12 col-md-6 col-lg-6">

                <input type="text" class="form-control bg-light text-dark " id="txtFullName" name="txtFullName">




              </div>

              <div class="form-group row mt-4">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Company Name</label></div>
                <div class="col-sm-12 col-md-6 col-lg-6">
                  <input type="text" id="ccname" name="cpname" class="form-control bg-light text-dark " required>
                </div>
              </div>

              <div class="form-group row mt-4">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Email</label></div>
                <div class="col-sm-12 col-md-6 col-lg-6">
                  <input type="email" id="myEmail" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
                    class="form-control bg-light text-dark" required>

                </div>
              </div>


              <div class="form-group row mt-4">
                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Customer phone</label>
                <div class="col-sm-12 col-md-3 col-lg-3">
                  <input type="text" name="wphone" class="form-control bg-light text-dark" style="width: 100%;"
                    placeholder="0000-0000000" pattern="[0-9]{4}-[0-9]{7}">


                </div>
                <div class=" col-sm-12 col-md-3 col-lg-3">
                  <input type="text" name="mobile" style="width:100%;" placeholder="Mobile" pattern="[0-9]{10}"
                    class="form-control bg-light text-dark" required>
                  <div class="toggle"
                    style=" color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                    Add more details </div>
                </div>



              </div>


              <fieldset19 class="contact" style="display: none;">


                <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Skype name/Number</label></div>

                  <div class="col-sm-12 col-md-6 col-lg-6">
                    <input type="text" class="form-control bg-light text-dark" id="cn" name="skname">
                  </div>



                </div>


                <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Designation</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                    <input type="text" class="form-control bg-light text-dark" id="cn" name="desg">
                  </div>


                </div>
                <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Department</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                    <input type="text" class="form-control bg-light text-dark" id="cn" name="dept">
                  </div>


                </div>
                <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                    <input type="text" class="form-control bg-light text-dark" id="cn" name="wbsite">
                  </div>
                </div>

              </fieldset19>




              <br><br><span class="input-group mb-1 mt-3">
                <div class="toggle2"
                  style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                  <a href="" style="color: rgb(230, 171, 45);">Other Details </a>
                </div>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <div class="toggle3"
                  style="color: rgb(230, 171, 45);font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">

                  <a href="" style="color: rgb(230, 171, 45);">Address </a>
                  <!-- <button class="btn" onclick="fieldset5_function()" style="border: none;background-color: transparent;">Address</button> -->
                </div>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                <div class="toggle4"
                  style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                  <a href="" style="color: rgb(230, 171, 45);">Contact Persons </a>
                </div>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;



                &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                <div class="toggle7"
                  style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                  <a href="" style="color: rgb(230, 171, 45);">Remarks</a>
                </div>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              </span><br><br><br>

              <fieldset2 class="other details" style="display: block;">
                <div class="form-group row mt-2">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> GST
                    Treatment*</label>

                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <select name="v_gsttype" id="GSTT" class="form-control bg-light text-dark"
                      onclick="gstPan_function()">
                      <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                      <option value="Registered Business-Regular Business that is registered under GST">Registered
                        Business-Regular Business that is registered under GST</option>
                      <option
                        value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                        Registered Business-Composition Business that is registered under the Composition schemen in GST
                      </option>
                      <option value="Unregistered Business-not Registered under GST">Unregistered Business-not
                        Registered under GST</option>
                      <option value="Overseas- Persons with who you do import or exports of supplies outside india">
                        Overseas- Persons with who you do import or exports of supplies outside india</option>
                      <option value="Special Economic Zone">Special Economic Zone</option>
                    </select><br>
                  </div>


                </div>
                <fieldset3 id="gst" style="display: none;">
                  <div class="row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">
                      GSTIN/UIN*</label>

                    <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input type="text" class="form-control bg-light text-dark" name="v_gstin"
                        placeholder="29APPCK7465F1Z1" id="gst_input" onmouseout="gst_check()">
                      <label id="gst_label"></label>

                    </div>
                  </div>

                </fieldset3>

                <fieldset4 id="pan" style="display: none;">
                  <div class=" row mt-4">
                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> PAN</label>

                    <div class=" col-sm-12 col-md-3 col-lg-3">
                      <input type="text" class="form-control bg-light text-dark" id="pan_input" onmouseout="pan_check()"
                        name="pan_number">
                      <label id="pan_label"></label>


                    </div>


                  </div>

                </fieldset4>





                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;"> Source Of
                    Supply*</label>

                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <select name="posply" id="PLACE" class="form-control bg-light text-dark">
                      <option value="value" selected></option>
                      <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar Islands</option>
                      <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                      <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh </option>
                      <option value="volvo">[AS]-Assam</option>
                      <option value="[BR]-Bihar">[BR]-Bihar</option>
                      <option value="volvo">[CH]- Chandhigarh</option>
                      <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                      <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                      <option value="volvo">[DL]- Delhi</option>
                      <option value="[GA]-Goa">[GA]-Goa</option>
                      <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                      <option value="[HR]-Haryana">[HR]-Haryana</option>
                      <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                      <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                      <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                      <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                      <option value="[KL]-Kerala">[KL]-Kerala</option>
                      <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                      <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                      <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                      <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                      <option value="[MN]-Manipur">[MN]-Manipur</option>
                      <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                      <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                      <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                      <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                      <option value="[OD]-Odisha">[OD]-Odisha</option>
                      <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                      <option value="[PB]-Punjab">[PB]-Punjab.</option>
                      <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                      <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                      <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                      <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                      <option value="[TR]-Tripura">[TR]-Tripura</option>
                      <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                      <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                      <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                      <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                    </select>
                  </div>


                </div>
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">Tax
                    Preference*</label>

                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <input type="checkbox" id="Taxable" name="tax1" value="Taxable">&nbsp;
                    <label for="vehicle1" class="pt-1">Taxable</label>
                    &nbsp;&nbsp;&nbsp;
                    <input type="checkbox" id="Tax Exempt" name="tax1" value="Tax Exempt">&nbsp;
                    <label for="vehicle2" class="pt-1"> Tax Exempt</label>

                  </div>


                </div>











                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">
                    Currency*</label>

                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <select name="crncy" id="PLACE" class="form-control bg-light text-dark">
                      <option value="Indian Rupee" selected>Indian Rupee</option>
                      <option value="Indian Rupee">Indian Rupee</option>

                    </select>
                  </div>


                </div>


                <div class="form-group row mt-4">
                  <label for="opn_bal" class="col-md-3 p-3">Opening Balance</label>
                  <div class="col-sm-12 col-md-3 col-lg-3 ">
                    <div class="input-group">
                      <div class="input-group-append">
                        <select class="form-gr form-select text-dark bg-light" id="bal" name="bal"
                          style="background-color: #888; width: 100px;">
                          <option value="credit">Credit</option>
                          <option value="debit">Debit</option>

                        </select>
                      </div>
                      <input type="number" class="form-control text-dark bg-light" id="cn" value="{{cu.OpeningBalance}}"
                        name="obal">
                    </div>
                  </div>



                </div>



                <div class="form-group row mt-4">
                  <label class=" col-md-3 col-lg-3 col-form-label"> Payment Terms</label>

                  <div class=" col-md-5 col-lg-3">

                    <select class="form-control bg-light text-dark" id="terms" name="terms">
                      <option id="crt_term" selected></option>
                      <option value="Net 60">Net 60</option>
                      <option value="Net 45">Net 45</option>
                      <option value="Net 30">Net 30</option>
                      <option value="Due On Receipt">Due On Receipt</option>

                      {% for p in sb %}

                      <option value="{{ p.term }}"> {{ p.term}}</option>
                      {% endfor %}
                    </select>



                  </div>

                  <div class="col-md-4 ">
                    <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment"
                      data-toggle="modal" style="color: white; background-color: rgb(210, 132, 30);">+</a>
                  </div>



                </div>


                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Price List </label>

                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <select name="plst" id="PLACE" id="PLACE" class="form-control bg-light text-dark">


                      <option type="text">PriceBook0 [ 68% Markup ]</option>
                      <option type="text">PriceBook1 [ 70% Markdown ]</option>

                      {% for cs in hi %}

                      <option type="text" value='{{ cs.id }}'> {{ cs.name}}</option>

                      {% endfor %}
                    </select>

                  </div>


                </div>



                <!-- <div class="form-group row mt-4">
                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Enable Portal? </label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="checkbox"  id="vehicle1" name="vehicle1" value="Bike">
                                    <label for="vehicle1">Allow Portal Access For This Customer</label>
   
                            </div></div> -->







                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">
                    Portal Language</label>
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <select name="plang" id="PLACE" style="width: 100%;" class="form-control bg-light text-dark">
                      <option selected disabled value="">Choose..</option>
                      <option value="ENGLISH">ENGLISH</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Facebook </label>
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <input type="text" id="cn" name="fbk" class="form-control bg-light text-dark">

                  </div>
                </div>
                <div class="form-group row mt-4">
                  <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Twitter</label>
                  <div class=" col-sm-12 col-md-3 col-lg-3">
                    <input type="text" id="cn" name="twtr" class="form-control bg-light text-dark">

                  </div>
                </div>


              </fieldset2>
              <!-- ....................................   Fieldset 5  .................................................... -->

              <fieldset5 class="address" style="display: none;">
                <div>
                  <div class="row">
                    <div class="col-sm-12 col-md-6 col-lg-6">
                      <div class="row">
                        <div class="col-sm-12 col-md-6 col-lg-6">
                          <label for="">BILLING ADDRESS</label>
                        </div>
                        <div class="col"></div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Attention</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark" id="batn" name="atn">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Country</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <select name="ctry" id="bcty" class="form-control bg-light text-dark">
                            <option value="India" selected>India</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Address</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <textarea class="bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4"
                            id="bads1" name="addrs"></textarea>
                          <textarea class="bg-light " style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4"
                            id="bads2" name="addrs1"></textarea>

                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> City</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark" id="bct" name="bct">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> State</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark" id="bst" name="bst">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Zip Code </label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="number" class="form-control bg-light text-dark" id="bzip" name="bzip">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Mobile </label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="tel" class="form-control bg-light text-dark" placeholder="1234567890"
                            pattern="[0-9]{10}" id="bpon" name="bpon">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Fax </label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="number" class="form-control bg-light text-dark" placeholder="1234567" id="bfx"
                            name="bfx">
                        </div>
                      </div>


                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                      <div class="row">
                        <div class="col-sm-12 col-md-6 col-lg-6">
                          <label for="">SHIPPING ADDRESS</label>
                        </div>
                        <div class="col-sm-12 col-md-6 col-lg-6">
                          <input type="checkbox" id="myCheckT" onclick="myCopyAddressFunction()">&nbsp;
                          <label for="myCheck">Same as Billing Address:</label>
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Attention</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark " style="color: white;" id="satn"
                            name="lna">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Country</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <select name="Place" id="scty" class="form-control bg-light text-dark">
                            <option value="India" selected>India</option>
                          </select>
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Address</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <textarea class="bg-light" style="border: none;color: rgb(10, 10, 10);" cols="26" rows="4"
                            id="sads1" name="lna"></textarea>
                          <textarea class="bg-light" style="border: none;color: rgb(10, 10, 10);" cols="26" rows="4"
                            id="sads2" name="lna"></textarea>
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> City</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark" id="sct" name="lna">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> State</label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="text" class="form-control bg-light text-dark" id="sst" name="lna">
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Zip Code </label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="number" class="form-control bg-light text-dark" id="szip" name="lna">
                        </div>
                      </div>


                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label">Mobile </label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="tel" class="form-control bg-light text-dark" placeholder="1234567890"
                            pattern="[0-9]{10}" style="color: white;" id="spn" name="lna">
                          <label for="" id="sphone_label"></label>
                        </div>
                      </div>
                      <div class="form-group row mt-4">
                        <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"> Fax </label>
                        <div class=" col-sm-12 col-md-6 col-lg-6">
                          <input type="tel" class="form-control bg-light text-dark" placeholder="1234567"
                            pattern="[0-9]{7}" style="color: white;" id="sfx" name="bfx">
                          <label for="" id="sfax_label"></label>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </fieldset5>


              <fieldset6 class="contact_person"
                style="display: none;color: azure ; font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                <div class="row">
                  <div class="col-sm-12 col-md-11 col-lg-11">
                    <div style="overflow-x: scroll;">
                      <table id="tbl" style="border:1px solid;border-color:white;width:75%;">
                        <tr>
                          <th>Salutation</th>
                          <th>First Name</th>
                          <th>Last Name</th>
                          <th>Email Address</th>
                          <th>Work Phone <br><label for="" id="twph_label"></label></th>
                          <th>Mobile <br><label for="" id="tlabel"></label> </th>
                          <th>Skype Name/No</th>
                          <th>Designation</th>
                          <th>Department</th>
                        </tr>
                        <tr>
                          <td><select name="sal[]" class="bg-light"
                              style="width:8rem;height: 2.4rem;border: none;color: black;" id="PLACE"
                              style="width:8rem;height: 2.4rem;">
                              <option value="Mr" selected>Mr.</option>
                              <option value="Mrs">Mrs.</option>
                              <option value="Ms">Ms.</option>
                              <option value="Miss">Miss.</option>
                              <option value="Dr">Dr.</option>
                            </select></td>
                          <td><input type="text" name="ftname[]"></td>
                          <td><input type="text" name="ltname[]"></td>
                          <td><input type="text" name="mail[]"></td>
                          <td><input type="tel" placeholder="1234-1234567" name="bworkpn[]"></td>
                          <td><input type="tel" name="bmobile[]"></td>
                          <td><input type="number" name="bskype[]"></td>
                          <td><input type="text" name="bdesg[]"></td>
                          <td><input type="text" name="bdept[]"></td>
                        </tr>
                      </table>

                    </div>
                    <div class="button add_another mt-3"
                      style="color: rgb(230, 171, 45);;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;font-size:22px;">
                      + Add Contact Person</div>

                  </div>

                </div>

              </fieldset6>



              <!-- ...........................................................Remarks    ......................................... -->



              <fieldset7 class="remarks" style="display: none;">
                <div class="row">
                  <div class="col-sm-12 col-md-8 col-lg-8">
                    <div class="form-group row mt-4">
                      <div class=" col-sm-12 col-md-6 col-lg-6">
                        <textarea class="bg-light" style="border: none;color: rgb(5, 5, 5);" cols="70" rows="4"
                          name="remark"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-2 col-lg-2"></div>
                </div>

              </fieldset7>




              <div class="row mt-4">
                <div class="col-sm-12 col-md-2 col-lg-2">
                  <input type="submit" class="form-control bg-warning text-dark" style="font-weight: bold;"
                    value="save">
                  <!-- <a href="{% url 'add_vendor' %}" role="button" class="form-control bg-light text-dark"></a> -->
                  <!-- <button type="submit">save</button> -->
                </div>

                <div class=" col-sm-12 col-md-2 col-lg-2">
                  <a href="" role="button" class="form-control  bg-warning text-dark" style="font-weight: bold;">
                    <center>Cancel</center>
                  </a>

                </div>


              </div>




              <br><br><br><br><br><br><br><br><br><br><br><br>



          </form>
        </div>
      </div>
    </div>
  </div>
  <script>
    function updateOpeningBalance() {
      var openingBalanceInput = document.getElementById("cn");
      var creditRadio = document.getElementById("cr");

      if (creditRadio.checked) {
        // If "Credit" is selected, display the opening balance as a negative value
        openingBalanceInput.value = -Math.abs(openingBalanceInput.value);
      } else {
        // If "Debit" is selected or neither radio button is checked, leave opening balance unchanged
        openingBalanceInput.value = Math.abs(openingBalanceInput.value);
      }
    }
  </script>


  <script>
    function generateFullName() {
      document.getElementById('txtFullName').value =
        document.getElementById('sa').value + ' ' +
        document.getElementById('fName').value + ' ' +
        document.getElementById('lName').value;

    }
    function gstPan_function() {
      var x = document.getElementById('GSTT').value
      if (x == "Unregistered Business-not Registered under GST") {
        document.getElementById("pan").style.display = "block";
        document.getElementById("gst").style.display = "none";


      }
      else if ((x == "Registered Business-Regular Business that is registered under GST") || (x == "Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x == "Overseas- Persons with who you do import or exports of supplies outside india") || (x == "Special Economic Zone")) {
        document.getElementById("gst").style.display = "block";
        document.getElementById("pan").style.display = "block";


      }

    }
    function gst_check() {
      var x = document.getElementById("gst_input").value;
      var gst_label = document.getElementById("gst_label")
      // var expr=/^[0-9]{15}$/;
      var expr = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

      // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
      // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
      if (!expr.test(x)) {
        gst_label.style.color = "red";
        gst_label.innerHTML = "Invalid GST Number.";
      }
      else {
        gst_label.style.color = "green";

        gst_label.innerHTML = "valid GST Number.";

      }
    }
    function pan_check() {
      var x = document.getElementById("pan_input").value;
      var gst_label = document.getElementById("pan_label")
      var expr = /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
      if (!expr.test(x)) {
        pan_label.style.color = "red";
        pan_label.innerHTML = "Invalid PAN Number.";
      }
      else {
        pan_label.style.color = "green";

        pan_label.innerHTML = "valid PAN Number.";

      }
    }
    $(document).ready(function () {
      $(".toggle1").click(function (e) {
        e.preventDefault();
        $("fieldset1").toggle();
      })
    })


    $(document).ready(function () {
      $(".toggle").click(function (e) {
        e.preventDefault();
        $("fieldset19").toggle();
      })
    })
    $(document).ready(function () {
      $(".toggle2").click(function (e) {
        e.preventDefault();

        $("fieldset2").toggle();
        $("fieldset5").hide();
        $("fieldset6").hide();
        $("fieldset7").hide();



      })
    })

    $(document).ready(function () {
      $(".toggle3").click(function (e) {
        e.preventDefault();
        $("fieldset5").toggle();
        $("fieldset2").hide();
        $("fieldset6").hide();
        $("fieldset7").hide();

      })
    })
    $(document).ready(function () {
      $(".toggle4").click(function (e) {
        e.preventDefault();
        $("fieldset6").toggle();
        $("fieldset2").hide();
        $("fieldset5").hide();
        $("fieldset7").hide();

      })
    })
    $(document).ready(function () {
      $(".toggle7").click(function (e) {
        e.preventDefault();
        $("fieldset7").toggle();
        $("fieldset2").hide();
        $("fieldset6").hide();
        $("fieldset5").hide();



      })
    })







    //   $('document').ready(function () {
    //     $('.add_another').click(function () {
    //       $("#tbl").append('<tr><td><select name="salutation[]" id="PLACE" style="width:8rem;height: 2.4rem;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="email[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="wphone[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="mobile[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="skype[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="department[]" style="width:8rem;" class="txtbox" value="" /></td></tr>');
    //     });
    //   })

    $('document').ready(function () {
      $('.add_another').click(function () {
        $("#tbl").append('<tr><td><select name="sal[]" id="PLACE" class="bg-light" style="width:8rem;height:2.4rem;border: none;color: black;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="ftname[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="ltname[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="email" name="mail[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{7} name="bworkpn[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="tel" pattern="[0-9]{10}"  name="bmobile[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="number"  name="bskype[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="bdesg[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td><td><input type="text" name="bdept[]" class="bg-light" style="width:8rem;border: none;color: black;" class="txtbox" value="" /></td></tr>');
      });
    })

    function fieldset5_function() {
      document.getElementById("address").style.display = "block";
    }


    function myCopyAddressFunction() {
      var checkBox = document.getElementById("myCheckT");
      var textatn = document.getElementById("batn");
      var txtcry = document.getElementById("bcty");
      var txtadrs11 = document.getElementById("bads1");
      var txtadrs12 = document.getElementById("bads2");
      var txtcty = document.getElementById("bct");
      var txtstat = document.getElementById("bst");
      var txtzip = document.getElementById("bzip");
      var txtphone = document.getElementById("bpon");
      var txtfx = document.getElementById("bfx");

      var textatn1 = document.getElementById("satn");
      var txtcry1 = document.getElementById("scty");
      var txtadrs21 = document.getElementById("sads1");
      var txtadrs22 = document.getElementById("sads2");
      var txtcty1 = document.getElementById("sct");
      var txtstat1 = document.getElementById("sst");
      var txtzip1 = document.getElementById("szip");
      var txtphone1 = document.getElementById("spn");
      var txtfx1 = document.getElementById("sfx");
      if (checkBox.checked == true) {
        textatn1.value = textatn.value;
        txtcry1.value = txtcry.value;
        txtadrs21.value = txtadrs11.value;
        txtadrs22.value = txtadrs12.value;
        txtcty1.value = txtcty.value;
        txtstat1.value = txtstat.value;
        txtzip1.value = txtzip.value;
        txtphone1.value = txtphone.value;
        txtfx1.value = txtfx.value;

      } else {
        textatn1.value = "";
        txtcry1.value = "";
        txtadrs21.value = "";
        txtadrs22.value = "";
        txtcty1.value = "";
        txtstat1.value = "";
        txtzip1.value = "";
        txtphone1.value = "";
        txtfx1.value = "";

      }
    }


    function open_table() {
      document.getElementById("hid").style.display = "block";

    }



    function work_phone() {
      var x = document.getElementById("workphone").value;
      var y = document.getElementById("workphone_label")
      var expr = /^[0-9]{7}$/;
      if (!expr.test(x)) {
        y.style.color = "red";
        y.innerHTML = "Invalid Phone Number.";
      }
      else {
        y.style.color = "green";

        y.innerHTML = "valid Phone Number.";

      }


    }

    function mobile_phone() {

      var a = document.getElementById("mphone").value;
      var b = document.getElementById("mphone_label");
      var expr = /^[0-9]{10}$/;
      if (!expr.test(a)) {
        b.style.color = "red";
        b.innerHTML = "Invalid Phone Number.";
      }
      else {
        b.style.color = "green";

        b.innerHTML = "valid Phone Number.";

      }
    }

    function bphone_number() {
      var a1 = document.getElementById("bphone_num").value;
      var b1 = document.getElementById("bphone_label");
      var expr = /^[0-9]{10}$/;
      if (!expr.test(a1)) {
        b1.style.color = "red";
        b1.innerHTML = "Invalid Phone Number.";
      }
      else {
        b1.style.color = "green";

        b1.innerHTML = "valid Phone Number.";

      }
    }

    function sphone_number() {
      var a1 = document.getElementById("sphone_num").value;
      var b1 = document.getElementById("sphone_label");
      var expr = /^[0-9]{10}$/;
      if (!expr.test(a1)) {
        b1.style.color = "red";
        b1.innerHTML = "Invalid Phone Number.";
      }
      else {
        b1.style.color = "green";

        b1.innerHTML = "valid Phone Number.";

      }
    }

    function fax_number() {
      var a1 = document.getElementById("bfx").value;
      var b1 = document.getElementById("fax_label");
      var expr = /^[0-9]{7}$/;
      if (!expr.test(a1)) {
        b1.style.color = "red";
        b1.innerHTML = "Invalid Phone Number.";
      }
      else {
        b1.style.color = "green";

        b1.innerHTML = "valid Phone Number.";

      }
    }

    function sfax_number() {
      var a1 = document.getElementById("sfx").value;
      var b1 = document.getElementById("sfax_label");
      var expr = /^[0-9]{7}$/;
      if (!expr.test(a1)) {
        b1.style.color = "red";
        b1.innerHTML = "Invalid Phone Number.";
      }
      else {
        b1.style.color = "green";

        b1.innerHTML = "valid Phone Number.";

      }
    }


    function sample() {

      var tbldata = document.getElementById("tbl");
      var total_rows = tbldata.rows.length;
      x = document.getElementById("tbl");
      var a1 = x.rows[total_rows - 1].cells[5].getElementsByTagName('input')[0].value;

      var b1 = document.getElementById("tlabel");

      b1.innerHTML = "";

      var expr = /^[0-9]{10}$/;
      if (!expr.test(a1)) {
        b1.style.color = "red";
        b1.innerHTML = "Invalid";
      }
      else {
        b1.style.color = "green";
        b1.innerHTML = "valid";

      }



    }

    function sample1() {

      var tbldata = document.getElementById("tbl");
      var total_rows = tbldata.rows.length;
      x = document.getElementById("tbl");
      var a1 = x.rows[total_rows - 1].cells[4].getElementsByTagName('input')[0].value;

      var b1 = document.getElementById("twph_label");

      b1.innerHTML = "";

      var expr = /^[0-9]{7}$/;
      if (!expr.test(a1)) {
        b1.style.color = "red";
        b1.innerHTML = "Invalid";
      }
      else {
        b1.style.color = "green";
        b1.innerHTML = "valid";

      }



    }


  </script>
  <!--endmodal-->

</div>
<!--modal-->

<div id="myMod" class="modal2 container-fluid">
  <div class="modal1-content  bg-dark">
    <div class="d-flex justify-content-end">
      <button type="button" class="close btn  text-grey "
        onclick="document.getElementById('myMod').style.display='none'" style="background-color: rgb(210, 30, 30);">
        <span aria-hidden="true">X</span>
    </div>
    <div class="modal-body">
      <style>
        * {

          font-family: "Gill Sans", sans-serif;
          color: white;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        input[type="email"],
        input[type="file"],
        .gen-info textarea,
        .gen-info select,
        .data select,
        .data option,
        .gen-info option {
          color: rgb(7, 7, 7);
          border: 1px solid rgb(0, 0, 0);
        }

        .gen-info .left {
          padding-right: 2rem;
        }


        .action-button {
          display: flex;
          align-items: center;
          /* justify-content: center; */
        }

        .action-button button {
          width: 8vw;
          font-size: 1.2vw;
          margin: 0.5rem .3rem;
        }

        label {
          font-size: 1.2vw;
        }

        .containerprof {

          position: relative;

        }

        .input-container {
          position: relative;
          margin: 0 auto;
          text-align: center;
        }
      </style>
      <section>
        <div class="containerprof p-5">
          <div class="header pb-5">
            <h3>CREATE EMPLOYEE</h3>
            <hr>
          </div>
          <form method="POST" action="{% url 'create_emp' %}" enctype="multipart/form-data" id="employeeform">
            {% csrf_token %}
            <div class="row">
              <div class="data col-6 col-lg-6 col-md-6 col-sm-12">
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Title</label>
                  </div>
                  <div class=" col-6">
                    <select class="form-control text-dark" name="title" id="title" required>
                      <option value=""></option>
                      <option value="Mr">Mr</option>
                      <option value="Mrs">Mrs</option>
                      <option value="Miss">Miss</option>
                      <option value="Ms">Ms</option>
                    </select>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">First Name</label>
                  </div>
                  <div class="input-container col-6">
                    <input type="text" class="form-control text-dark" name="fname" id="fname" required>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Last Name</label>
                  </div>
                  <div class="input-container col-6">
                    <input type="text" class="form-control text-dark" name="lname" id="lname" required>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Alias</label>
                  </div>
                  <div class="input-container col-6"><input type="text" class="form-control text-dark" name="alias"
                      id="alias">
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Date of joining</label>
                  </div>
                  <div class="input-container col-6">
                    <input type="date" class="form-control text-dark" name="joindate" id="joindate">

                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Define salary details</label>
                  </div>
                  <div class="col-6">
                    <select class="form-control text-dark" name="saltype" id="sal" onchange="salFunction()">
                      <option value="">Select</option>
                      <option value="Fixed">Fixed</option>
                      <option value="Fixed">Temporary</option>
                      <option value="Variable">Time Based</option>
                    </select>
                  </div>
                </div>

                <div id="fixed" style="display: none;">
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Salary Amount</label>
                    </div>
                    <div class="col-6"><input type="number" class="form-control text-dark" name="fsalary" id="fsalary">
                    </div>
                  </div>

                </div>
                <div id="variable" style="display: none;">
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Amount per Hour</label>
                    </div>
                    <div class="col-6"><input type="number" class="form-control text-dark" name="amnt" id="amnt"></div>
                  </div>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Total working Hours</label>
                    </div>
                    <div class="col-6"><input type="number" class="form-control text-dark" name="hours" id="hours"
                        onkeyup="calculateAmount()"></div>
                  </div>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Salary Amount</label>
                    </div>
                    <div class="col-6"><input type="number" class="form-control text-dark" name="vsalary" id="vsalary">
                    </div>
                  </div>
                </div>


              </div>
              <div class="image col-6 col-lg-6 col-md-6 col-sm-12">

                <div class="row">
                  <div class="col-5 col-lg-5 col-md-10 col-sm-12 text-center">
                    <label for="">Upload Image</label>
                  </div>
                  <div class="col-7 col-lg-7 col-md-10 col-sm-12">
                    <label for="image-input">
                      <img class="img-fluid" src="{% static 'images/payrollimg.png' %}" alt="" width="190px"
                        height="200px" id="img"
                        style="background-color: rgba(156, 156, 156, 0.267); border-radius: 30px;">
                    </label>
                    <input id="image-input" type="file" name="file" class="form-control" accept="image/*"
                      onchange="loadFile(event)" style="display: none;">

                  </div>

                </div>


              </div>
              <script>
                var loadFile = function (event) {
                  var reader = new FileReader();
                  reader.onload = function () {
                    var output = document.getElementById('img');
                    output.src = reader.result;
                  };
                  reader.readAsDataURL(event.target.files[0]);
                };

              </script>
            </div>

            <div class="gen-info row pt-5">
              <div class="left col-6 col-lg-6 col-md-6 col-sm-12">
                <h4 class="text-center py-2">General information</h4>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Employee Number</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="empnum" id="empnum"
                      onkeyup="empValidation(document.getElementById('empnum'))" required>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Designation</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="designation" required>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Location</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="location" required>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Gender</label>
                  </div>
                  <div class="col-6">
                    <select class="form-control text-dark" name="gender" id="dropId3" required>
                      <option value="">Select</option>
                      <option value="Male">Male</option>
                      <option value="Female">Female</option>
                      <option value="Transgender">Transgender</option>
                    </select>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Date of Birth</label>
                  </div>
                  <div class="col-6"><input type="date" class="form-control text-dark" name="dob" required></div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Blood Group</label>
                  </div>
                  <div class="col-6">
                    <select class="form-control text-dark" id="blood" name="blood" required>
                      <option value=""></option>
                      <option value="A+">A+</option>
                      <option value="A-">A-</option>
                      <option value="B+">B+</option>
                      <option value="B-">B-</option>
                      <option value="O+">O+</option>
                      <option value="O-">O-</option>
                      <option value="AB+">AB+</option>
                      <option value="AB-">AB-</option>
                    </select>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Father's Name/Mother's Name</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="fm_name" required>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Spouse's Name</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="s_name"></div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Permanent Address</label>
                  </div>
                  <div class="col-6">
                    <textarea class="form-control text-dark mb-2 pt-0" name="paddress" id="padrs1" required></textarea>
                    <textarea class="form-control text-dark pt-0" name="paddress2" id="padrs2"></textarea>
                  </div>
                </div>
                <div class="row pb-4">
                  <div class="col-6">
                    <label for="">Temporary Address</label>
                  </div>
                  <div class="col-6">
                    <input class="mx-2" type="checkbox" id="filladdress" name="filladdress"><label
                      style="font-size: .8rem;">Same as permanent address</label>
                    <textarea class="form-control text-dark mb-2 pt-0" name="address" id="adrs1" required></textarea>
                    <textarea class="form-control text-dark pt-0" name="address2" id="adrs2"></textarea>
                  </div>
                </div>

                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Contact Number</label>
                  </div>
                  <div class="col-6"><input type="number" class="form-control text-dark" name="phone" id="phone"
                      required
                      onkeyup="phoneValidate(document.getElementById('phone'),document.getElementById('pherror'))">
                    <div id="pherror" class="text-danger"></div>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Emergency Contact Number</label>
                  </div>
                  <div class="col-6"><input type="number" class="form-control text-dark" name="ephone" id="ephone"
                      onkeyup="phoneValidate(document.getElementById('ephone'),document.getElementById('epherror'))">
                    <div id="epherror" class="text-danger"></div>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Email</label>
                  </div>
                  <div class="col-6"><input type="email" class="form-control text-dark" name="email" id="email" required
                      onkeyup="emailvalidate()">
                    <div id="error" class="text-danger"></div>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Attachments</label>
                  </div>
                  <div class="col-6">
                    <input class="form-control" id="file-upload" type="file" name="attach"
                      style="background: transparent;">
                  </div>
                </div>
              </div>
              <div class="col-6 col-lg-6 col-md-6 col-sm-12 pt-3">
                <div class="row pb-4">
                  <div class="col-6">
                    <label for="">Provide Bank Details</label>
                  </div>
                  <div class="col-6"><select class="form-control text-dark" name="bank" id="dropId"
                      onchange="bankdisplay()" required>
                      <option value=""></option>
                      <option value="1">Yes</option>
                      <option value="0">No</option>
                    </select>
                  </div>
                </div>
                <div class="bank" id="bank" style="display: none;">
                  <h4 class="text-center py-2">Bank information</h4>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Account Number</label>
                    </div>
                    <div class="col-6"><input type="number" class="form-control text-dark" name="acc_no" id="acc_no"
                        pattern="[0-9]{15}"></div>
                  </div>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">IFSC</label>
                    </div>
                    <div class="col-6"><input type="text" class="form-control text-dark" name="ifsc" id="ifsc">
                    </div>
                  </div>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Name of Bank</label>
                    </div>
                    <div class="col-6"><input type="text" class="form-control text-dark" name="b_name" id="b_name">
                    </div>
                  </div>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Branch Name</label>
                    </div>
                    <div class="col-6"><input type="text" class="form-control text-dark" name="branch" id="branch">
                    </div>
                  </div>
                  <h5 class="text-center py-1">For Banking</h5>
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Transaction Type</label>
                    </div>
                    <div class="col-6">
                      <select class="form-control text-dark" name="ttype" id="ttype">
                        <option value=""></option>
                        <option value="ATM">ATM</option>
                        <option value="Cash">Cash</option>
                        <option value="Check">Check</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">TDS Applicable</label>
                  </div>
                  <div class="col-6">
                    <select class="form-control text-dark" name="tds" id="tds" onchange="tdsFunction()" required>
                      <option value=""></option>
                      <option value="1">Yes</option>
                      <option value="0">No</option>
                    </select>
                  </div>
                </div>
                <div id="tds-div" style="display: none;">
                  <div class="row pb-3">
                    <div class="col-6">
                      <label for="">Percentage/Amount</label>
                    </div>
                    <div class="col-6">
                      <select class="form-control text-dark" name="pora" id="pora" onchange="tdsFunction2()">
                        <option value=""></option>
                        <option value="Percentage">Percentage</option>
                        <option value="Amount">Amount</option>
                      </select>
                    </div>
                  </div>
                  <div id="p" style="display: none;">
                    <div class="row pb-3">
                      <div class="col-6">
                        <label for="">Percentage</label>
                      </div>
                      <div class="col-6"><input type="number" class="form-control text-dark" name="pcnt" id="pcnt">
                      </div>
                    </div>
                  </div>
                  <div id="a" style="display: none;">
                    <div class="row pb-3">
                      <div class="col-6">
                        <label for="">Amount</label>
                      </div>
                      <div class="col-6"><input type="number" class="form-control text-dark" name="amnt" id="amnt">
                      </div>
                    </div>
                  </div>
                </div>
                <h4 class="text-center py-2">Statutary information</h4>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Income Tax Number</label>
                  </div>
                  <div class="col-6"><input type="number" class="form-control text-dark" name="itn"></div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Aadhar Number</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="an" id="an" required></div>
                </div>
                <script>
                  const input = document.getElementById("an");
                  input.addEventListener("input", () => input.value = formatNumber(input.value.replaceAll(" ", "")));

                  const formatNumber = (number) => number.split("").reduce((seed, next, index) => {
                    if (index !== 0 && !(index % 4)) seed += " ";
                    return seed + next;
                  }, "");
                </script>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">Universal Account Number(UAN)</label>
                  </div>
                  <div class="col-6"><input type="number" class="form-control text-dark" name="uan"></div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">PF Account Number(PFN)</label>
                  </div>
                  <div class="col-6"><input type="number" class="form-control text-dark" name="pfn"></div>
                </div>
                <div class="row pb-3">
                  <div class="col-6">
                    <label for="">PR Account Number(PRAN)</label>
                  </div>
                  <div class="col-6"><input type="text" class="form-control text-dark" name="pran"></div>
                </div>
              </div>
            </div>

            <hr>
            <div class="action-button">
              <button class="btn btn-primary" type="submit">Add</button>
              <button class="btn btn-danger" type="reset">Cancel</button>
            </div>
            <div class="text-center">
              {% for message in messages %}
              <div class="alert alert-success alert-dismissible fade show" role="alert" id="alert">
                <strong>{{message}}</strong>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              {% endfor %}
            </div>
          </form>

        </div>



      </section>

      <script>

        function bankdisplay() {
          var e = document.getElementById("dropId").value;

          if (e == 0) {
            document.getElementById("bank").style.display = 'none'

          }
          else {
            document.getElementById("bank").style.display = 'block'
          }

        }
        function salFunction() {
          var e = document.getElementById("sal");
          var sal = e.value;
          if (sal == 'Fixed') {
            document.getElementById("fixed").style.display = 'block'
            document.getElementById("variable").style.display = 'none'
          }
          else if (sal == 'Variable') {
            document.getElementById("variable").style.display = 'block'
            document.getElementById("fixed").style.display = 'none'
          }

        }
        function calculateAmount(val) {
          var a = document.getElementById("amnt").value;
          var h = document.getElementById("hours").value;
          var tot = h * a;
          document.getElementById('vsalary').value = tot;

        }

        function tdsFunction() {
          var e = document.getElementById("tds");
          var sal = e.value;
          if (sal == '1') {
            document.getElementById("tds-div").style.display = 'block'
          }
          else {
            document.getElementById("tds-div").style.display = 'none'
          }

        }
        function tdsFunction2() {
          var e = document.getElementById("pora");
          var sal = e.value;
          if (sal == 'Percentage') {
            document.getElementById("p").style.display = 'block';
            document.getElementById("a").style.display = 'none';
          }
          else if (sal == 'Amount') {
            document.getElementById("a").style.display = 'block';
            document.getElementById("p").style.display = 'none'
          }
        }
        function emailvalidate() {
          var email = document.getElementById('email')
          var error = document.getElementById('error')
          if (!email.value.match(/^[A-Za-z\._\-0-9]*[@][A-Za-z]*[\.][a-z]{2,4}$/)) {
            error.style.fontSize = ".8rem"
            error.innerHTML = "*Please enter a valid email"
            return false;

          }
          error.innerHTML = ""
          return true;
        }
        function phoneValidate(phn, pherror) {
          if (!phn.value.match(/^[6-9]\d{9}$/)) {
            pherror.style.display = "block"
            pherror.style.fontSize = ".8rem"
            pherror.innerHTML = "*Please enter a valid phone number"
            return false;
          }
          pherror.style.display = "none"
          pherror.innerHTML = ""
          return true;
        }
        function empValidation(emp) {
          emp.addEventListener("input", function () {
            emp.value = emp.value.toUpperCase();
          });

        }
        inputvalue = document.getElementById('ifsc')
        inputvalue.addEventListener("input", function () {
          inputvalue.value = inputvalue.value.toUpperCase();
        });
        const inputFields = document.querySelectorAll("input[type='text']");

        inputFields.forEach(function (input) {
          input.addEventListener("input", function () {
            const inputValue = input.value;
            input.value = inputValue.charAt(0).toUpperCase() + inputValue.slice(1);
          });
        });

        document.getElementById("an").addEventListener("input", function () {
          const input = this.value;
          if (input.length > 14) {
            this.value = input.slice(0, 14); // Truncate the input to 10 characters
          }
        });
        document.getElementById("acc_no").addEventListener("input", function () {
          const input = this.value;
          if (input.length > 15) {
            this.value = input.slice(0, 15); // Truncate the input to 10 characters
          }
        });

        $(document).ready(function () {
          $("#filladdress").on("click", function () {
            if (this.checked) {
              $("#adrs1").val($("#padrs1").val());
              $("#adrs2").val($("#padrs2").val());

            }
            else {
              $("#adrs1").val('');
              $("#adrs2").val('');
            }
          });
        });
      </script>

    </div>
  </div>
</div>

<!--endmodal-->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    $("#employeeform").on("submit", function (e) {
      e.preventDefault(); // Prevent the default form submission

      $.ajax({
        type: "POST",
        url: $(this).attr("action"), // Get the URL from the form's action attribute
        data: $(this).serialize(), // Serialize the form data

        success: function (data) {
          document.getElementById("employeeform").reset();
          // reloadCustomer();

          var dropdown = $('#user_select');
          dropdown.empty();
          $.each(data, function (key, value) {
            console.log()
            dropdown.append($('<option></option>').attr('value', key).text(value[1] + " " + value[2]));
          });
          var modal1 = document.getElementById("myMod");
          modal1.style.display = "none";

        },
        error: function (xhr, textStatus, errorThrown) {
          console.error("Error:", textStatus, errorThrown);
        }
      });
    });
  });
</script>

<script>
  $(document).on('change', '#user_select', function () {
    var employee = $('#user_select').val();
    console.log(employee)
    $.ajax({
      type: "GET",
      url: "{% url 'getemployee' %}",
      data: {
        id: employee
      },
      success: function (response) {
        data7 = response.email
        document.getElementById('email').value = data7

      }
    });

  });

</script>

<script>
  $(document).ready(function () {
    $("#forms").on("submit", function (e) {
      e.preventDefault(); // Prevent the default form submission

      $.ajax({
        type: "POST",
        url: $(this).attr("action"), // Get the URL from the form's action attribute
        data: $(this).serialize(), // Serialize the form data

        success: function (data) {
          document.getElementById("forms").reset();
          // reloadCustomer();

          var dropdown = $('#customer');
          dropdown.empty();
          $.each(data, function (key, value) {
            console.log(data);
            dropdown.append($('<option></option>').attr('value', value[0]).text(value[1] + " " + value[2]));
          });
          var modal1 = document.getElementById("myModa");
          modal1.style.display = "none";

        },
        error: function (xhr, textStatus, errorThrown) {
          console.error("Error:", textStatus, errorThrown);
        }
      });
    });
  });
</script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Get a reference to the Cancel buttons
    const cancelButton = document.getElementById('cancel-btn');

    // Get a reference to the form
    const projectForm = document.getElementById('project-form');

    // Add a click event listener to the Cancel button
    cancelButton.addEventListener('click', function () {
      // Reset the form to clear the entered data
      projectForm.reset();
    });
  });
</script>
<script>
  $(document).ready(function () {
    $("#billingMethodSelect").change(function () {
      var selectedOption = $(this).val();
      if (selectedOption === "Fixed cost for project") {
        $("#rateLabel").text("Total project cost*");
      } else {
        $("#rateLabel").text("Rate per hour*");
      }
    });
  });
</script>
<script>
  var createUserBtn = document.getElementById("create-cus");
  var modal1 = document.getElementById("myModa");

  createUserBtn.onclick = function () {
    modal1.style.display = "block";
  }

  var cancelBtn = document.getElementById("cancel-btn");

  cancelBtn.onclick = function () {
    modal1.style.display = "none";
  }
</script>
<script>
  var createUserBtn = document.getElementById("create-user");
  var modal = document.getElementById("myMod");

  createUserBtn.onclick = function () {
    modal.style.display = "block";
  }

  var cancelBtn = document.getElementById("cancel-btn");

  cancelBtn.onclick = function () {
    modal.style.display = "none";
  }
</script>

<script>
  $(document).on('click', '#user_select', function () {
    var select = $('#user_select').val();
    $.ajax({
      type: "GET",
      url: "{% url 'poject_itemz' %}",
      data: {
        id: select
      },
      success: function (response) {
        console.log(response);
        var data = response.email;
        $('#email').val(data);
      }
    });
  });
</script>
<script>
  $(document).on('click', '#user_select1', function () {
    var select = $('#user_select1').val();
    $.ajax({
      type: "GET",
      url: "{% url 'poject_itemz' %}",
      data: {
        id: select
      },
      success: function (response) {
        console.log(response);
        var data = response.email;
        $('#email1').val(data);
      }
    });
  });
</script>
<script>
  $(document).on('click', '#user_select2', function () {
    var select = $('#user_select2').val();
    $.ajax({
      type: "GET",
      url: "{% url 'poject_itemz' %}",
      data: {
        id: select
      },
      success: function (response) {
        console.log(response);
        var data = response.email;
        $('#email2').val(data);
      }
    });
  });
</script>
<script>
  $(document).on('click', '#user_select3', function () {
    var select = $('#user_select3').val();
    $.ajax({
      type: "GET",
      url: "{% url 'poject_itemz' %}",
      data: {
        id: select
      },
      success: function (response) {
        console.log(response);
        var data = response.email;
        $('#email3').val(data);
      }
    });
  });
</script>
<script>
  $(document).on('click', '#user_select4', function () {
    var select = $('#user_select4').val();
    $.ajax({
      type: "GET",
      url: "{% url 'poject_itemz' %}",
      data: {
        id: select
      },
      success: function (response) {
        console.log(response);
        var data = response.email;
        $('#email4').val(data);
      }
    });
  });
</script>
<script>
  // var customerSelect = document.getElementById('customer');
  // var customerEmailInput = document.getElementById('customer-email');

  // customerSelect.addEventListener('change', function () {
  //   var selectedOption = this.options[this.selectedIndex];
  //   var email = selectedOption.dataset.email;

  //   customerEmailInput.value = email;
  // });
</script>

<script>
  
$(document).on("click","#customerSave",function(){

if ($('input[name="radioCust"]:checked').val() == 'Business'){

  custType = $('#business').val();
}
else{
  custType = $('#individual').val();
}

// if ($('input[name="radioCust2"]:checked').val() == 'active'){

// custstatus = $('#active').val();
// }
// else{
// custstatus = $('#inactive').val();
// }
  
if ($('input[name="radioCust1"]:checked').val() == 'Taxable'){
  cust_tax = $('#custtax1').val();
}
else{
    cust_tax = $('#custtax2').val();
}
if($('#bal').val()=='credit'){
    openbal = $("#c_open").val()
    openbal = -openbal
  }else{
    openbal = $("#c_open").val()
  }

$.ajax({
  
  type : 'POST',
  url:"{% url 'new_estimate_customer' %}",

  data:{
      customer_type : custType,
      display_name : $('#cdisplayname').text(),
      company_name : $('#ccompany').val(),
      email : $("#cemail").val(),
      work_mobile :$("#cw_mobile").val(),
      pers_mobile :$("#cp_mobile").val(),
      facebook :$("#facebook").val(),
      twitter :$("#twitter").val(),
      website :$("#website").val(),
      skype :$("#cskype").val(),
      desg :$("#c_desg").val(),
      dpt :$("#c_dpt").val(),
      gsttype :$("#c_gsttype").val(),
      gstno:$("#c_gstin").val(),
      placeofsupply :$("#placesupply").val(),
      tax_preference :cust_tax,
      currency : $("#c_curn").val(),
      openingbalance : openbal,
      paymentterms : $("#c_terms").val(),
      street1 : $("#cstreet1").val(),
      street2 : $("#cstreet2").val(),
      city : $("#ccity").val(),
      state : $("#cstate").val(),
      pincode : $("#cpincode").val(),
      fax : $("#cfax").val(),
      phone : $("#cphone").val(),
      country : $("#ccountry").val(),
      sstreet1 : $("#csstreet1").val(),
      sstreet2 : $("#csstreet2").val(),
      scity : $("#cscity").val(),
      sstate : $("#csstate").val(),
      scountry : $("#cscountry").val(),
      spincode : $("#cspincode").val(),
      sphone: $("#csphone").val(),
      sfax: $("#csfax").val(),
      csrfmiddlewaretoken: '{{ csrf_token }}'
    },
  
    success: function(response) {
      document.getElementById("modalCustomer").reset();
      reloadCustomer();
    },
});        
});



function reloadCustomer() {

$.ajax({
  url: "{% url 'customer_dropdownE' %}",
  type: "GET",
  dataType: "json",
  data: $(this).serialize(),
  data:enteredCName,
  csrfmiddlewaretoken: '{{ csrf_token }}',

  success: function(data) {
    console.log("AJAX Success Data:", data);
    var dropdown = $('#customer');
    dropdown.empty();
    $.each(data, function(key, value) {
        // dropdown.append($('<option></option>').attr('value', key).text(value[1]).val(value[0]));
        dropdown.append($('<option></option>').attr('value', key).text(value[1]).val(key));
    });
    if (enteredCName) {
        dropdown.find('option').filter(function() {
          return $(this).text() === enteredCName;
        }).prop('selected', true);
      }
   

    // if (enteredCName) {
    //             dropdown.val(enteredCName);
    //         }
      
  },
  error: function(xhr, status, error) {
  console.error(xhr.responseText);
  }
});

}


// ......................... ajax for customer gst according to customer selection..........

$(document).ready(function(){
  $('#customer').change(function(){
    var name = $("#customer").val();
    console.log("helooooooooooooooooooo")
    console.log(name)
    $.ajax({
      url: "{% url 'exp_get_customerdet' %}", 
            data: { 
                    id : name,
                    csrfmiddlewaretoken: '{{ csrf_token }}' 
                },

            type : 'POST',
            success: function(data) {
              var gstTreatment = data.gst_treatment;
                    var gstin = data.gstin;
                    var email = data.email;
                    var s_supply=data.cust_place_supply;
                    var adrs=data.address;
                    var adrs2=data.address2;
                    var city=data.city;
                    var state=data.cus_state;
                    var country=data.country;
                    var pin=data.pincode;
                    console.log("helloooooooooooooooooooooooooooooooo");

                    // $("#caddress_field").removeClass('d-none');
                    // $("#caddress_field").addClass('d-flex');

                    $("#c_supply_field").removeClass('d-none');
                    $("#c_supply_field").addClass('d-flex');

                    $("#cgsttreat_field").removeClass('d-none');
                    $("#cgsttreat_field").addClass('d-flex');
                    console.log("helloooooooooooooooooooooooooooooooo");
                   

                   
                      // $("#caddress_field").show();
                      // $("#c_supply_field").show();
                    // document.getElementById('caddress_field').style.display='block';
                    

                    $("#cgst_treatment").val(gstTreatment);
                    $("#source_of_supply").val(s_supply);
                    $("#source_of_supply").val(s_supply);


                    if(adrs != "")
                    {
                      $("#cust_address").val(adrs+"\n"+city+"\n"+state+"\n"+country+"\n"+pin);
                      $("#caddress_field").removeClass('d-none');
                      $("#caddress_field").addClass('d-flex');
                    }
                    else
                    {
                      $("#caddress_field").removeClass('d-flex');
                      $("#caddress_field").addClass('d-none');
                    }
                    if(adrs2 != "")
                    {
                      $("#custb_address").val(adrs+"\n"+city+"\n"+state+"\n"+country+"\n"+pin);
                      $("#caddressb_field").removeClass('d-none');
                      $("#caddressb_field").addClass('d-flex');
                    }
                    else
                    {
                      $("#caddressb_field").removeClass('d-flex');
                      $("#caddressb_field").addClass('d-none');
                    }
                    if(email != null )
                    {
                      $("#cemail_address").val(email);

                      $("#cemail_field").show();
                     
                    }

                    if (gstin != null) 
                    {
                        $("#cgstin").val(gstin);
                        $("#cgstin_field").removeClass('d-none');
                         $("#cgstin_field").addClass('d-flex');

                    } 
                    else 
                    {
                      $("#cgstin_field").removeClass('d-flex');
                         $("#cgstin_field").addClass('d-none');
                    }

                    var cust_place=s_supply;
                    var vend_place=document.getElementById("source_of_supply2").value;
                    console.log("%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%");
                    console.log(vend_place);
                    console.log(cust_place);
                    console.log("%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%");

                    if(vend_place == cust_place)
                    {
                      document.getElementById("tax").style.display="block";
                      document.getElementById("tax_label").style.display="block";
                      document.getElementById("tax2").style.display="none";
                      document.getElementById("tax2_label").style.display="none";
                    }
                    else{
                      document.getElementById("tax2").style.display="block";
                      document.getElementById("tax2_label").style.display="block";
                      document.getElementById("tax").style.display="none";
                      document.getElementById("tax_label").style.display="none";
                    }
            }
    });
  });
});
 

//--------payment terms modal-----------

$(document).on("click","#paySave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_pay' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalPayment").reset();
        reloadPayment();
      },
  });        
});

function reloadPayment() {

  $.ajax({
    url: "{% url 'pay_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#c_terms');
      dropdown.empty();
      // dropdown.append(`<option selected value="15">NET 15</option>
      //                     <option value="30">NET 30</option>
      //                     <option value="45">NET 45</option>
      //                     <option value="60">NET 60</option>
      //                     <option value="90">NET 90</option>
      //                     <option value="">Due end of the month</option>
      //                     <option value="recpt">Due on receipt</option>`);
      // var drpv = $('#v_terms');
      // drpv.empty();
      // drpv.append(`<option selected value="15">NET 15</option>
      //                   <option value="30">NET 30</option>
      //                   <option value="45">NET 45</option>
      //                   <option value="60">NET 60</option>
      //                   <option value="90">NET 90</option>
      //                   <option value="">Due end of the month</option>
      //                   <option value="recpt">Due on receipt</option>`);
      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
          // drpv.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}




</script>
<div class="modal fade" id="create_customer">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Customer</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);height: 100%; overflow-y: scroll;">
        <div class="card p-3 m-3">
          <form action="{% url 'entr_custmrA2' %}" method="post" class="needs-validation" novalidate autocomplete="off" id="modalCustomer">
    
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Customer Type</label><br>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="business" name="radioCust" value="Business"  >
                    <label for="option1">Business</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="individual" name="radioCust" value="Individual" >
                    <label for="option2">Individual</label>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Customer Status</label><br>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="active" name="radioCust2" value="active" >
                    <label for="option1">Active</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="inactive" name="radioCust2" value="inactive" >
                    <label for="option2">Inactive</label>
                  </div>
                </div>
              </div>
            </div> -->
            <div class="row mt-5">
              <div class="col-md-3">
                <label for="ctitle">Title</label>
              </div>
              <div class="col-md-3">
                <select name="ctitle" id="ctitle" class="form-control text-dark bg-light">
                  <option value="Mr." selected>Mr</option>
                  <option value="Mrs.">Mrs</option>
                  <option value="Ms.">Ms</option>
                  <option value="Miss.">Miss</option>
                  <option value="Dr.">Dr</option>
                </select>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cfname">First name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cfname" name="cfirstname" required>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="clname">Last name</label>
                <label id="cdisplayname" name = "cdisplayname" hidden required></label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="clname" name="clastname">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="ccompany">Company Name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="ccompany" name="ccompany_name" required>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cemail">Customer Email</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="email" class="form-control text-dark bg-light" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$">    
              </div>              
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="email">Customer Phone</label>
              </div>
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
              </div>        
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
              </div>          
            </div>

       
            <hr>
            <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
            <div class="row mt-5">
              <div class="col-md-3 mt-2">
                <label for="facebook">Facebook</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="facebook" placeholder="www.example.com" name="facebook">
              </div>       
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="twitter">Twitter</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="twitter" placeholder="www.example.com" name="twitter">
              </div>       
            </div>


            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="website">Website</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="website" placeholder="www.example.com" name="website">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cskype">Skype name/Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cskype" name="cskype">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_desg">Designation</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_desg" name="c_desg">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_dpt">Department</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_dpt" name="c_dpt">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="c_gsttype" name="c_gsttype" required>
                  <option value="value" selected>Select a Gst Treatment</option>
                  <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                  <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                  <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                  <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                  <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                  <option value="Special Economic Zone">Special Economic Zone</option>
                </select>
              </div>       
            </div>
           
            <div class="row gstrow d-none" >
              <div class="col-md-3 mt-2">
                <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_gstin" name="c_gstin" 
                  placeholder="29APPCK7465F1Z1">
                <label id="gst_label"></label>
              </div>       
            </div>

           

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="placesupply" name="placesupply">
                  <option value="[AN]-Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                  <option value="[AD]-Andhra Predhesh">[AD] Andhra Predhesh</option>
                  <option value="[AR]-Arunachal Predesh">[AR] Arunachal Predesh</option>
                  <option value="[AS]-Assam">[AS] Assam</option>
                  <option value="[BR]-Bihar">[BR] Bihar</option>
                  <option value="[CH]-Chandigarh">[CH] Chandigarh</option>
                  <option value="[CG]-Chhattisgarh">[CG] Chhattisgarh</option>
                  <option value="[DNH]-Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                  <option value="[DD]-Damn anad Diu">[DD] Damn anad Diu</option>
                  <option value="[DL]-Delhi">[DL] Delhi</option>
                  <option value="[GA]-Goa">[GA] Goa</option>
                  <option value="[GJ]-Gujarat">[GJ] Gujarat</option>
                  <option value="[HR]-Haryana">[HR] Haryana</option>
                  <option value="[HP]-Himachal Predesh">[HP] Himachal Predesh</option>
                  <option value="[JK]-Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                  <option value="[JH]-Jharkhand">[JH] Jharkhand</option>
                  <option value="[KA]-Karnataka">[KA] Karnataka</option>
                  <option value="[KL]-Kerala">[KL] Kerala</option>
                  <option value="[LA]-Ladakh">[LA] Ladakh</option>
                  <option value="[LD]-Lakshadweep">[LD] Lakshadweep</option>
                  <option value="[MP]-Madhya Predesh">[MP] Madhya Predesh</option>
                  <option value="[MH]-Maharashtra">[MH] Maharashtra</option>
                  <option value="[MN]-Manipur">[MN] Manipur</option>
                  <option value="[ML]-Meghalaya">[ML] Meghalaya</option>
                  <option value="[MZ]-Mizoram">[MZ] Mizoram</option>
                  <option value="[NL]-Nagaland">[NL] Nagaland</option>
                  <option value="[OD]-Odisha">[OD] Odisha</option>
                  <option value="[PY]-Puducherry">[PY] Puducherry</option>
                  <option value="[PB]-Punjab">[PB] Punjab</option>
                  <option value="[RJ]-Rajasthan">[RJ] Rajasthan</option>
                  <option value="[SK]-Sikkim">[SK] Sikkim</option>
                  <option value="[TN]-Tamil Nadu">[TN] Tamil Nadu</option>
                  <option value="[TS]-Telangana">[TS] Telangana</option>
                  <option value="[TR]-Tripura">[TR] Tripura</option>
                  <option value="[UP]-Uttar Predesh">[UP] Uttar Predesh</option>
                  <option value="[UK]-Uttarakhand">[UK] Uttarakhand</option>
                  <option value="[WB]-West Bengal">[WB] West Bengal</option>
                  <option value="[OT]-Other Territory">[OT] Other Territory</option>
                </select>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference* </label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="custtax1" name="radioCust1" value="Taxable" >
                    <label for="option1">Taxable</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="custtax2" name="radioCust1" value="Tax-exempt" >
                    <label for="option2">Tax-exempt</label>
                  </div>
                </div>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_curn">Currency </label>
              </div>
              <div class="col-md-3 mt-2">
                <select class="form-control text-dark bg-light" id="c_curn" name="c_curn" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="INR">INR</option>
                </select>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_open">Opening Balance</label>
              </div>
              <div class="col-md-6 mt-2 d-flex">
                <select name="bal" id="bal" style="width: 24%; height: 100%;" class="form-gr form-select text-dark bg-light" >
                  <option value="credit">Credit</option>
                  <option value="debit">Debit</option>
                </select>
                <input type="text" class="form-control text-dark bg-light" id="c_open" name="c_open">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_terms">Payment Terms</label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <select class="form-control text-dark bg-light" id="c_terms" name="c_terms" required>
                    {% for p in pay %}
                    <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                    {% endfor %}
                  </select>                
                  <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>   
                </div>
              </div>       
            </div>
            

            <hr>

            <div class="row mt-2">
              <div class="col-md-6 mt-5 text-center text-uppercase">
                <h4 class="mb-0">Billing Address</h4>
              </div>
              <div class="col-md-6 mt-5">
                <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
              </div>
            </div>
            <div class="row mt-2 m-0 p-0 mb-2">
              <div class="col-md-9"> </div>
              <div class="col-md-3 text-right  m-0 p-0">
                <input type="checkbox" onclick="addressSame()" id="csokay" name="csokay">
                <label for="csokay" style="color: #909091;">Same As Billing Address</label>
              </div>
            </div>

            <div class="row mt-5">
              <div class="col-md-1">
                <label for="cstreet1">Address 1</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="cstreet1" name="cstreet1"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstreet1">Address 1</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="csstreet1" name="csstreet1"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>
            <div class="row mt-5">
              <div class="col-md-1">
                <label for="cstreet2">Address 2</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="cstreet2" name="cstreet2"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstreet2">Address 2</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="csstreet2" name="csstreet2"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>
            
            <div class="row mt-2">
              <div class="col-md-1">
                <label for="ccity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="ccity" name="ccity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
              <div class="col-md-1">
                <label for="cscity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cscity" name="cscity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
            </div>
            
            <div class="row mt-2">
              <div class="col-md-1">
                <label for="cstate">State</label>
              </div>
              <div class="col-md-4">
                <select type="text" class="form-control text-dark bg-light" id="cstate" name="cstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>
              <div class="col-md-1"></div>
              
              <div class="col-md-1">
                <label for="csstate">State</label>
              </div>
              <div class="col-md-4 ">
                <select type="text" class="form-control text-dark bg-light" id="csstate" name="csstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>

              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="ccountry">Country</label>
              </div>
              <div class="col-md-4 ">
                <input type="text" class="form-control text-dark bg-light" id="ccountry" name="ccountry" placeholder="Country">  
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="cscountry">Country</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cscountry"  name="cscountry" placeholder="Country">
              </div>
              <div class="col-md-1 "></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cpincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cpincode" name="cpincode" maxlength="6" placeholder="PIN Code"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="cspincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cspincode" name="cspincode" maxlength="6" placeholder="PIN Code">  
              </div>
              <div class="col-md-1"></div>

            </div>
            
            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cphone" name="cphone" placeholder="Phone"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="csphone" name="csphone" placeholder="Phone">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cfax" name="cfax" placeholder="FAX"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="csfax" name="csfax" placeholder="FAX">  
              </div>
              <div class="col-md-1"></div>

            </div>
            
            <div class="row mt-2">
                <div class="col-md-6">
                  <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                  <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                  <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                </div>
            </div>
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="customerSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
              </div>
          </div>
      </div>
  </div>  
</div>  

<div class="modal fade" id="newcustomer" style="overflow: scroll;">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Customer</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37); z-index: 1;overflow: scroll; ">
        <div class="card p-3 m-3">
          <form action="{% url 'entr_custmrA2' %}" method="post" class="needs-validation" novalidate autocomplete="off" id="modalCustomer">
    
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Customer Type</label><br>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="business" name="radioCust" value="Business"  >
                    <label for="option1">Business</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="individual" name="radioCust" value="Individual" >
                    <label for="option2">Individual</label>
                  </div>
                </div>
              </div>
            </div>
            <!-- <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Customer Status</label><br>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="active" name="radioCust2" value="active" >
                    <label for="option1">Active</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="inactive" name="radioCust2" value="inactive" >
                    <label for="option2">Inactive</label>
                  </div>
                </div>
              </div>
            </div> -->
            <div class="row mt-5">
              <div class="col-md-3">
                <label for="ctitle">Title</label>
              </div>
              <div class="col-md-3">
                <select name="ctitle" id="ctitle" class="form-control text-dark bg-light">
                  <option value="Mr." selected>Mr</option>
                  <option value="Mrs.">Mrs</option>
                  <option value="Ms.">Ms</option>
                  <option value="Miss.">Miss</option>
                  <option value="Dr.">Dr</option>
                </select>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cfname">First name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cfname" name="cfirstname" required>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="clname">Last name</label>
                <label id="cdisplayname" name = "cdisplayname" hidden required></label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="clname" name="clastname">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="ccompany">Company Name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="ccompany" name="ccompany_name" required>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cemail">Customer Email</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="email" class="form-control text-dark bg-light" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$">    
              </div>              
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="email">Customer Phone</label>
              </div>
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
              </div>        
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
              </div>          
            </div>

       
            <hr>
            <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
            <div class="row mt-5">
              <div class="col-md-3 mt-2">
                <label for="facebook">Facebook</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="facebook" placeholder="www.example.com" name="facebook">
              </div>       
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="twitter">Twitter</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="twitter" placeholder="www.example.com" name="twitter">
              </div>       
            </div>


            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="website">Website</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="website" placeholder="www.example.com" name="website">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cskype">Skype name/Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cskype" name="cskype">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_desg">Designation</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_desg" name="c_desg">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_dpt">Department</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_dpt" name="c_dpt">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="c_gsttype" name="c_gsttype" required>
                  <option value="value" selected>Select a Gst Treatment</option>
                  <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                  <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                  <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                  <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                  <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                  <option value="Special Economic Zone">Special Economic Zone</option>
                </select>
              </div>       
            </div>
           
            <div class="row gstrow d-none" >
              <div class="col-md-3 mt-2">
                <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_gstin" name="c_gstin" 
                  placeholder="29APPCK7465F1Z1">
                <label id="gst_label"></label>
              </div>       
            </div>

           

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="placesupply" name="placesupply">
                  <option value="[AN]-Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                  <option value="[AD]-Andhra Predhesh">[AD] Andhra Predhesh</option>
                  <option value="[AR]-Arunachal Predesh">[AR] Arunachal Predesh</option>
                  <option value="[AS]-Assam">[AS] Assam</option>
                  <option value="[BR]-Bihar">[BR] Bihar</option>
                  <option value="[CH]-Chandigarh">[CH] Chandigarh</option>
                  <option value="[CG]-Chhattisgarh">[CG] Chhattisgarh</option>
                  <option value="[DNH]-Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                  <option value="[DD]-Damn anad Diu">[DD] Damn anad Diu</option>
                  <option value="[DL]-Delhi">[DL] Delhi</option>
                  <option value="[GA]-Goa">[GA] Goa</option>
                  <option value="[GJ]-Gujarat">[GJ] Gujarat</option>
                  <option value="[HR]-Haryana">[HR] Haryana</option>
                  <option value="[HP]-Himachal Predesh">[HP] Himachal Predesh</option>
                  <option value="[JK]-Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                  <option value="[JH]-Jharkhand">[JH] Jharkhand</option>
                  <option value="[KA]-Karnataka">[KA] Karnataka</option>
                  <option value="[KL]-Kerala">[KL] Kerala</option>
                  <option value="[LA]-Ladakh">[LA] Ladakh</option>
                  <option value="[LD]-Lakshadweep">[LD] Lakshadweep</option>
                  <option value="[MP]-Madhya Predesh">[MP] Madhya Predesh</option>
                  <option value="[MH]-Maharashtra">[MH] Maharashtra</option>
                  <option value="[MN]-Manipur">[MN] Manipur</option>
                  <option value="[ML]-Meghalaya">[ML] Meghalaya</option>
                  <option value="[MZ]-Mizoram">[MZ] Mizoram</option>
                  <option value="[NL]-Nagaland">[NL] Nagaland</option>
                  <option value="[OD]-Odisha">[OD] Odisha</option>
                  <option value="[PY]-Puducherry">[PY] Puducherry</option>
                  <option value="[PB]-Punjab">[PB] Punjab</option>
                  <option value="[RJ]-Rajasthan">[RJ] Rajasthan</option>
                  <option value="[SK]-Sikkim">[SK] Sikkim</option>
                  <option value="[TN]-Tamil Nadu">[TN] Tamil Nadu</option>
                  <option value="[TS]-Telangana">[TS] Telangana</option>
                  <option value="[TR]-Tripura">[TR] Tripura</option>
                  <option value="[UP]-Uttar Predesh">[UP] Uttar Predesh</option>
                  <option value="[UK]-Uttarakhand">[UK] Uttarakhand</option>
                  <option value="[WB]-West Bengal">[WB] West Bengal</option>
                  <option value="[OT]-Other Territory">[OT] Other Territory</option>
                </select>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference* </label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="custtax1" name="radioCust1" value="Taxable" >
                    <label for="option1">Taxable</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="custtax2" name="radioCust1" value="Tax-exempt" >
                    <label for="option2">Tax-exempt</label>
                  </div>
                </div>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_curn">Currency </label>
              </div>
              <div class="col-md-3 mt-2">
                <select class="form-control text-dark bg-light" id="c_curn" name="c_curn" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="INR">INR</option>
                </select>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_open">Opening Balance</label>
              </div>
              <div class="col-md-6 mt-2 d-flex">
                <select name="bal" id="bal" style="width: 24%; padding-top: 10px; height: 50px;">
                  <option value="credit" selected>Credit</option>
                  <option value="debit">Debit</option>
              </select>
              
                <input type="text" class="form-control text-dark bg-light" id="c_open" name="c_open">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_terms">Payment Terms</label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <select class="form-control text-dark bg-light" id="c_terms" name="c_terms" required>
                    {% for p in pay %}
                    <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                    {% endfor %}
                  </select>                
                  <!-- <a href="#" classs="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>    -->
                </div>
              </div>       
            </div>
            

            <hr>

            <div class="row mt-2">
              <div class="col-md-6 mt-5 text-center text-uppercase">
                <h4 class="mb-0">Billing Address</h4>
              </div>
              <div class="col-md-6 mt-5">
                <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
              </div>
            </div>
            <div class="row mt-2 m-0 p-0 mb-2">
              <div class="col-md-9"> </div>
              <div class="col-md-3 text-right  m-0 p-0">
                <input type="checkbox" onclick="addressSame()" id="csokay" name="csokay">
                <label for="csokay" style="color: #909091;">Same As Billing Address</label>
              </div>
            </div>

            <div class="row mt-5">
              <div class="col-md-1">
                <label for="cstreet1">Address 1</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="cstreet1" name="cstreet1"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstreet1">Address 1</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="csstreet1" name="csstreet1"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>
            <div class="row mt-5">
              <div class="col-md-1">
                <label for="cstreet2">Address 2</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="cstreet2" name="cstreet2"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstreet2">Address 2</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="csstreet2" name="csstreet2"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>
            
            <div class="row mt-2">
              <div class="col-md-1">
                <label for="ccity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="ccity" name="ccity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
              <div class="col-md-1">
                <label for="cscity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cscity" name="cscity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
            </div>
            
            <div class="row mt-2">
              <div class="col-md-1">
                <label for="cstate">State</label>
              </div>
              <div class="col-md-4">
                <select type="text" class="form-control text-dark bg-light" id="cstate" name="cstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>
              <div class="col-md-1"></div>
              
              <div class="col-md-1">
                <label for="csstate">State</label>
              </div>
              <div class="col-md-4 ">
                <select type="text" class="form-control text-dark bg-light" id="csstate" name="csstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>

              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="ccountry">Country</label>
              </div>
              <div class="col-md-4 ">
                <input type="text" class="form-control text-dark bg-light" id="ccountry" name="ccountry" placeholder="Country">  
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="cscountry">Country</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cscountry"  name="cscountry" placeholder="Country">
              </div>
              <div class="col-md-1 "></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cpincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cpincode" name="cpincode" maxlength="6" placeholder="PIN Code"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="cspincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cspincode" name="cspincode" maxlength="6" placeholder="PIN Code">  
              </div>
              <div class="col-md-1"></div>

            </div>
            
            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cphone" name="cphone" placeholder="Phone"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="csphone" name="csphone" placeholder="Phone">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cfax" name="cfax" placeholder="FAX"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="csfax" name="csfax" placeholder="FAX">  
              </div>
              <div class="col-md-1"></div>

            </div>
            
            <div class="row mt-2">
                <div class="col-md-6">
                  <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                  <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                  <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                </div>
            </div>
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="customerSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
              </div>
          </div>
      </div>
  </div>  
</div>  
<script>
  $(document).ready(function () {
    var roinc = 0;

    $('#add-task-row').click(function () {
      roinc++;
      $('#items-table-task').append(`
      <tr id="addt0${roinc}">
        <td>
          <input type="text" class="form-control bg-light text-dark" id="task1${roinc}" name="taskname[]">
        </td>
        <td class="text-right">
          <input type="text" class="form-control bg-light text-dark" id="desc1${roinc}" name="taskdes[]">
        </td>
        <td class="text-right rate-column">
            <div class="input-group mb-2">
  <div class="input-group-prepend">
    <div class="input-group-text">INR</div>
  </div>
  <input type="text" class="form-control bg-light text-dark" id="tsk1${roinc}" name="taskrph[]">
</div>

        </td>
        <td class="text-center">
          <input type="checkbox" id="billable1${roinc}" name="billable[]" placeholder="work phone" value="on">
          <label style="color: gainsboro;">Billable</label>
          
        </td>
        <td id="hidden${roinc}"><input class="form-control text-dark" type="date" name="billdate[]"></td>
        <td ><button type="button" class="btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row" id="${roinc}" style="width:30px">
            <i class="fa fa-times"></i>
          </button></td>
      </tr>
    `);
      applyHideShowForRateColumn();
    });

    $('#billingMethodSelect').change(function () {
      applyHideShowForRateColumn();
    });

    function applyHideShowForRateColumn() {
      var selectedMethod = $('#billingMethodSelect').val();
      if (selectedMethod === "Fixed cost for project" || selectedMethod === "Based on project hours") {
        $('.rate-column').hide();
      } else {
        $('.rate-column').show();
      }
    }

    $(document).ready(function () {
      $("#billable1${roinc}").change(function () {
        if (this.checked) {
          $("#hidden${roinc}").css("display", "block");
        } else {
          $("#hidden${roinc}").css("display", "none");
        }
      });
    });
  });

  $(document).on('click', '.delete-row', function () {
    var row_id = $(this).attr("id");
    $('#addt0' + row_id + '').remove();
  });
</script>



<script>
  $(document).ready(function () {
    // Initialize row counter
    var roinc = 0;

    // Function to add a new user row
    function addUserRow() {
      roinc++;

      var newRow = `
        <tr id="addr0${roinc}">
          <td>
            <select name="user_select[]" id="user_select${roinc}" class="form-control bg-light text-dark">
              <option>Select User</option>
              {% for d in emp %}
                <option value="{{ d.id }}" data-email="{{ d.first_name }}">{{ d.first_name }} {{ d.last_name }}</option>
              {% endfor %}
            </select>
          </td>
          <td class="text-right">
            <input type="email" class="form-control bg-light text-dark" id="email1${roinc}" name="email[]">
          </td>
          <td class="text-center">
            <button type="button" class="btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle remove_row" style="width:30px" id="${roinc}">
              <i class="fa fa-times"></i>
            </button>
          </td>
        </tr>
      `;

      // Append the new row to the table
      $('#items-table-body').append(newRow);

      // Update the options of the newly created select element with data from the modal
      var option = new Option($('#username').val(), $('#username').val());
      $('#user_select' + roinc).append(option);

      $(document).on('change', '#user_select' + roinc, function () {
        var employee = $('#user_select' + roinc).val();
        $.ajax({
          type: "GET",
          url: "{% url 'getemployee' %}",
          data: {
            id: employee
          },
          success: function (response) {
            data7 = response.email
            document.getElementById('email1' + roinc).value = data7

          }
        });

      });

      // Update the email input with the email from the modal
      $('#email' + roinc).val($('#email').val());
    }

    // Handle click event for "Add User" button
    $('#add-user-row').click(function () {
      addUserRow();
    });

    // After successful user creation in the modal, update all select elements with new data
    $('[id^="user_select"]').each(function () {
      var option = new Option($('#username').val(), $('#username').val());
      $(this).append(option);
    });

    // Update the email input of the newly created row
    $('[id^="email"]').each(function () {
      $(this).val($('#email').val());
    });

    // Hide the modal after creating the user
    $('#myModal').hide();

    // Handle click event for "Remove Row" buttons
    $(document).on('click', '.remove_row', function () {
      var row_id = $(this).attr("id");
      $('#addr0' + row_id).remove();
    });

    // Remove the empty option from the select elements
    $('[id^="user_select"]').each(function () {
      $(this).find('option[value=""]').remove();
    });
  });
</script>



<script>
  // Wait for the document to be ready
  $(document).ready(function () {
    // Handle select change event
    $('#billingMethodSelect').on('change', function () {
      var selectedOption = $(this).val();

      // Check if the selected option requires an input box
      if (selectedOption === 'Fixed cost for project' || selectedOption === 'Based on project hours') {
        $('#inputBoxContainer').hide();
        $('#task_table th:nth-child(3), #task_table td:nth-child(3)').hide();
      } else {
        $('#inputBoxContainer').show();
        $('#task_table th:nth-child(3), #task_table td:nth-child(3)').show();
      }
    });
  });
</script>


<script>
  // Wait for the document to be ready
  $(document).ready(function () {
    // Handle select change event
    $('#billingMethodSelect').on('change', function () {
      var selectedOption = $(this).val();

      // Check if the selected option requires an input box
      if (selectedOption === 'Fixed cost for project' || selectedOption === 'Based on project hours') {
        $('#inputBoxContainer').show();
      } else {
        $('#inputBoxContainer').hide();
      }
    });
  });
</script>

<script>
  $(document).ready(function () {
    $("#cfname, #clname").change(function () {
      $("#cdisplayname").text($("#ctitle").val() + " " + $("#cfname").val() + " " + $("#clname").val());
    });
  });


</script>
<div id="myModal2" class="modal3" style="z-index: 9999;">
  <div class="modal3-content bg-dark">
    <h2>New Payment Terms</h2>

    <form id="payment-form">
      {% csrf_token %} {# Add the CSRF token #}

      <div class="form-group">
        <label for="term-name" style="color: rgb(190, 88, 88);">Term Name*</label>
        <input type="text" id="term-name" class="form-control bg-light text-dark" required>
      </div>

      <div class="form-group">
        <label for="number-of-days" style="color: rgb(190, 88, 88);">Number of days*</label>
        <input type="number" id="number-of-days" class="form-control bg-light text-dark" required>
      </div>

      <div class="modal1-buttons">
        <button type="submit" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);"
          id="create-btnz">Create</button>
        <button type="button" onclick="document.getElementById('myModal2').style.display='none'"
          class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="cancel-btn">Cancel</button>
      </div>
    </form>
  </div>
</div>


<script>
  var createUserBtn = document.getElementById("paymentterms");
  var modal3 = document.getElementById("myModal2");

  createUserBtn.onclick = function () {
    modal3.style.display = "block";
  }

  var cancelBtn = document.getElementById("cancel-btn");

  cancelBtn.onclick = function () {
    modal3.style.display = "none";
  }
</script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function () {
    // Bind a click event to the "Create Payment Term" button
    $("#paymentterms").click(function () {
      // Display the modal to create new payment terms
      $("#myModal2").css("display", "block");
    });

    // Handle form submission for adding new payment terms
    $("#payment-form").submit(function (event) {
      event.preventDefault(); // Prevent form submission

      // Extract term name and number of days from the form
      var termName = $("#term-name").val();
      var numberOfDays = $("#number-of-days").val();

      // Perform an AJAX POST request to add the new payment term
      $.ajax({
        type: "POST",
        url: "{% url 'recurbills_payzzz' %}",
        data: {
          name: termName,
          days: numberOfDays,
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
        success: function (response) {
          // If the new payment term is added successfully,
          // update the dropdown list with the new option
          $("#c_terms").append(
            '<option value="' + termName + ' ' + response.id + '">' + termName + '</option>'
          );

          // Hide the modal
          $("#myModal2").css("display", "none");
        },
        error: function (xhr, textStatus, errorThrown) {
          console.error(errorThrown);
        }
      });
    });
  });
</script>


{% endblock %}